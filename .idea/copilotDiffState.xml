<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/CalendarDay.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/CalendarDay.java" />
              <option name="originalContent" value="package com.example.smartexpense;&#10;&#10;import java.util.Calendar;&#10;&#10;public class CalendarDay {&#10;    private Calendar date;&#10;    private boolean isSelected;&#10;    private boolean isFromPreviousMonth;&#10;    private boolean isToday;&#10;    private boolean isFutureDate;&#10;&#10;    public CalendarDay(Calendar date, boolean isFromPreviousMonth) {&#10;        this.date = date;&#10;        this.isFromPreviousMonth = isFromPreviousMonth;&#10;        this.isSelected = false;&#10;&#10;        // Check if this day is today&#10;        Calendar today = Calendar.getInstance();&#10;        this.isToday = isSameDay(date, today);&#10;&#10;        // Check if this day is in the future&#10;        this.isFutureDate = date.after(today) &amp;&amp; !isSameDay(date, today);&#10;    }&#10;&#10;    public Calendar getDate() {&#10;        return date;&#10;    }&#10;&#10;    public void setDate(Calendar date) {&#10;        this.date = date;&#10;    }&#10;&#10;    public boolean isSelected() {&#10;        return isSelected;&#10;    }&#10;&#10;    public void setSelected(boolean selected) {&#10;        isSelected = selected;&#10;    }&#10;&#10;    public boolean isFromPreviousMonth() {&#10;        return isFromPreviousMonth;&#10;    }&#10;&#10;    public void setFromPreviousMonth(boolean fromPreviousMonth) {&#10;        isFromPreviousMonth = fromPreviousMonth;&#10;    }&#10;&#10;    public boolean isToday() {&#10;        return isToday;&#10;    }&#10;&#10;    public void setToday(boolean today) {&#10;        isToday = today;&#10;    }&#10;&#10;    public boolean isFutureDate() {&#10;        return isFutureDate;&#10;    }&#10;&#10;    public void setFutureDate(boolean futureDate) {&#10;        isFutureDate = futureDate;&#10;    }&#10;&#10;    public int getDayOfMonth() {&#10;        return date.get(Calendar.DAY_OF_MONTH);&#10;    }&#10;&#10;    private boolean isSameDay(Calendar cal1, Calendar cal2) {&#10;        return cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &amp;&amp;&#10;                cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR);&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.smartexpense;&#13;&#10;&#13;&#10;import java.util.Calendar;&#13;&#10;&#13;&#10;public class CalendarDay {&#13;&#10;    private Calendar date;&#13;&#10;    private boolean isSelected;&#13;&#10;    private boolean isFromPreviousMonth;&#13;&#10;    private boolean isToday;&#13;&#10;    private boolean isFutureDate;&#13;&#10;&#13;&#10;    public CalendarDay(Calendar date, boolean isFromPreviousMonth) {&#13;&#10;        this.date = date;&#13;&#10;        this.isFromPreviousMonth = isFromPreviousMonth;&#13;&#10;        this.isSelected = false;&#13;&#10;&#13;&#10;        // Check if this day is today&#13;&#10;        Calendar today = Calendar.getInstance();&#13;&#10;        this.isToday = isSameDay(date, today);&#13;&#10;&#13;&#10;        // Check if this day is in the future&#13;&#10;        this.isFutureDate = date.after(today) &amp;&amp; !isSameDay(date, today);&#13;&#10;    }&#13;&#10;&#13;&#10;    public Calendar getDate() {&#13;&#10;        return date;&#13;&#10;    }&#13;&#10;&#13;&#10;    public void setDate(Calendar date) {&#13;&#10;        this.date = date;&#13;&#10;    }&#13;&#10;&#13;&#10;    public boolean isSelected() {&#13;&#10;        return isSelected;&#13;&#10;    }&#13;&#10;&#13;&#10;    public void setSelected(boolean selected) {&#13;&#10;        isSelected = selected;&#13;&#10;    }&#13;&#10;&#13;&#10;    public boolean isFromPreviousMonth() {&#13;&#10;        return isFromPreviousMonth;&#13;&#10;    }&#13;&#10;&#13;&#10;    public void setFromPreviousMonth(boolean fromPreviousMonth) {&#13;&#10;        isFromPreviousMonth = fromPreviousMonth;&#13;&#10;    }&#13;&#10;&#13;&#10;    public boolean isToday() {&#13;&#10;        return isToday;&#13;&#10;    }&#13;&#10;&#13;&#10;    public void setToday(boolean today) {&#13;&#10;        isToday = today;&#13;&#10;    }&#13;&#10;&#13;&#10;    public boolean isFutureDate() {&#13;&#10;        return isFutureDate;&#13;&#10;    }&#13;&#10;&#13;&#10;    public void setFutureDate(boolean futureDate) {&#13;&#10;        isFutureDate = futureDate;&#13;&#10;    }&#13;&#10;&#13;&#10;    public int getDayOfMonth() {&#13;&#10;        return date.get(Calendar.DAY_OF_MONTH);&#13;&#10;    }&#13;&#10;&#13;&#10;    private boolean isSameDay(Calendar cal1, Calendar cal2) {&#13;&#10;        return cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &amp;&amp;&#13;&#10;                cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR);&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/DayDetailActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/DayDetailActivity.java" />
              <option name="originalContent" value="package com.example.smartexpense;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.view.View;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;import androidx.recyclerview.widget.LinearLayoutManager;&#10;import androidx.recyclerview.widget.RecyclerView;&#10;&#10;import com.example.smartexpense.adapters.TransactionAdapter;&#10;import com.example.smartexpense.model.Category;&#10;import com.example.smartexpense.model.Transaction;&#10;import com.example.smartexpense.model.TransactionItem;&#10;import com.example.smartexpense.utils.CurrencyUtils;&#10;import com.example.smartexpense.services.FirebaseService;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#10;import com.google.firebase.Timestamp;&#10;&#10;import java.text.DecimalFormat;&#10;import java.text.DecimalFormatSymbols;&#10;import java.text.SimpleDateFormat;&#10;import java.util.ArrayList;&#10;import java.util.Calendar;&#10;import java.util.HashMap;&#10;import java.util.List;&#10;import java.util.Locale;&#10;import java.util.Map;&#10;&#10;public class DayDetailActivity extends AppCompatActivity {&#10;&#10;    private TextView tvDate;&#10;    private TextView tvDayIncome;&#10;    private TextView tvDayExpense;&#10;    private TextView tvDayBalance;&#10;    private ImageView btnBack;&#10;    private RecyclerView rvDayTransactions;&#10;    private LinearLayout emptyState;&#10;    private FloatingActionButton fabAddTransaction;&#10;&#10;    private FirebaseService firebaseService;&#10;    private TransactionAdapter transactionAdapter;&#10;    private List&lt;TransactionItem&gt; transactionItems;&#10;    private Map&lt;String, Category&gt; categoriesMap;&#10;    private Calendar selectedDate;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_day_detail);&#10;&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        // Get selected date from intent&#10;        long dateMillis = getIntent().getLongExtra(&quot;selected_date&quot;, System.currentTimeMillis());&#10;        selectedDate = Calendar.getInstance();&#10;        selectedDate.setTimeInMillis(dateMillis);&#10;&#10;        firebaseService = FirebaseService.getInstance();&#10;        categoriesMap = new HashMap&lt;&gt;();&#10;        transactionItems = new ArrayList&lt;&gt;();&#10;&#10;        initViews();&#10;        setupRecyclerView();&#10;        loadCategoriesAndTransactions();&#10;        setupClickListeners();&#10;    }&#10;&#10;    private void initViews() {&#10;        tvDate = findViewById(R.id.tvDate);&#10;        tvDayIncome = findViewById(R.id.tvDayIncome);&#10;        tvDayExpense = findViewById(R.id.tvDayExpense);&#10;        tvDayBalance = findViewById(R.id.tvDayBalance);&#10;        btnBack = findViewById(R.id.btnBack);&#10;        rvDayTransactions = findViewById(R.id.rvDayTransactions);&#10;        emptyState = findViewById(R.id.emptyState);&#10;        fabAddTransaction = findViewById(R.id.fab_add_transaction);&#10;&#10;        // Set date display&#10;        SimpleDateFormat sdf = new SimpleDateFormat(&quot;d 'tháng' M yyyy&quot;, new Locale(&quot;vi&quot;, &quot;VN&quot;));&#10;        tvDate.setText(sdf.format(selectedDate.getTime()));&#10;    }&#10;&#10;    private void setupRecyclerView() {&#10;        transactionAdapter = new TransactionAdapter(this, transactionItems);&#10;        rvDayTransactions.setLayoutManager(new LinearLayoutManager(this));&#10;        rvDayTransactions.setAdapter(transactionAdapter);&#10;&#10;        // Set click listener for transactions&#10;        transactionAdapter.setOnTransactionClickListener(transaction -&gt; {&#10;            Intent intent = new Intent(DayDetailActivity.this, TransactionDetailsActivity.class);&#10;            intent.putExtra(&quot;transaction_id&quot;, transaction.getId());&#10;            intent.putExtra(&quot;transaction_title&quot;, transaction.getTitle());&#10;            intent.putExtra(&quot;transaction_amount&quot;, transaction.getAmount());&#10;            intent.putExtra(&quot;transaction_type&quot;, transaction.getType());&#10;            intent.putExtra(&quot;transaction_category&quot;, transaction.getCategoryName());&#10;            intent.putExtra(&quot;transaction_date&quot;, transaction.getDate().getSeconds());&#10;            startActivity(intent);&#10;        });&#10;    }&#10;&#10;    private void loadCategoriesAndTransactions() {&#10;        // Load categories first, then transactions&#10;        firebaseService.getCategoriesByType(&quot;income&quot;)&#10;                .addOnSuccessListener(incomeCategories -&gt; {&#10;                    for (Category category : incomeCategories) {&#10;                        categoriesMap.put(category.getId(), category);&#10;                    }&#10;&#10;                    firebaseService.getCategoriesByType(&quot;expense&quot;)&#10;                            .addOnSuccessListener(expenseCategories -&gt; {&#10;                                for (Category category : expenseCategories) {&#10;                                    categoriesMap.put(category.getId(), category);&#10;                                }&#10;&#10;                                // Now load transactions for the day&#10;                                loadDayTransactions();&#10;                            })&#10;                            .addOnFailureListener(e -&gt; {&#10;                                Toast.makeText(this, &quot;Lỗi khi tải danh mục&quot;, Toast.LENGTH_SHORT).show();&#10;                                loadDayTransactions();&#10;                            });&#10;                })&#10;                .addOnFailureListener(e -&gt; {&#10;                    Toast.makeText(this, &quot;Lỗi khi tải danh mục&quot;, Toast.LENGTH_SHORT).show();&#10;                    loadDayTransactions();&#10;                });&#10;    }&#10;&#10;    private void loadDayTransactions() {&#10;        // Set start and end of day&#10;        Calendar startOfDay = (Calendar) selectedDate.clone();&#10;        startOfDay.set(Calendar.HOUR_OF_DAY, 0);&#10;        startOfDay.set(Calendar.MINUTE, 0);&#10;        startOfDay.set(Calendar.SECOND, 0);&#10;&#10;        Calendar endOfDay = (Calendar) selectedDate.clone();&#10;        endOfDay.set(Calendar.HOUR_OF_DAY, 23);&#10;        endOfDay.set(Calendar.MINUTE, 59);&#10;        endOfDay.set(Calendar.SECOND, 59);&#10;&#10;        Timestamp startTimestamp = new Timestamp(startOfDay.getTime());&#10;        Timestamp endTimestamp = new Timestamp(endOfDay.getTime());&#10;&#10;        firebaseService.getTransactionsBetweenDates(startTimestamp, endTimestamp)&#10;                .addOnSuccessListener(querySnapshot -&gt; {&#10;                    List&lt;Transaction&gt; transactions = new ArrayList&lt;&gt;();&#10;                    // Sử dụng mảng để có thể thay đổi giá trị trong lambda&#10;                    final double[] totals = new double[2]; // [0] = income, [1] = expense&#10;&#10;                    querySnapshot.forEach(document -&gt; {&#10;                        Transaction transaction = document.toObject(Transaction.class);&#10;                        transaction.setId(document.getId());&#10;                        transactions.add(transaction);&#10;&#10;                        // Calculate totals&#10;                        if (&quot;income&quot;.equals(transaction.getType())) {&#10;                            totals[0] += transaction.getAmount();&#10;                        } else if (&quot;expense&quot;.equals(transaction.getType())) {&#10;                            totals[1] += transaction.getAmount();&#10;                        }&#10;                    });&#10;&#10;                    // Update summary&#10;                    double totalIncome = totals[0];&#10;                    double totalExpense = totals[1];&#10;                    tvDayIncome.setText(CurrencyUtils.formatCurrency(totalIncome));&#10;                    tvDayExpense.setText(CurrencyUtils.formatCurrency(totalExpense));&#10;                    tvDayBalance.setText(CurrencyUtils.formatCurrency(totalIncome - totalExpense));&#10;&#10;                    // Convert to transaction items&#10;                    convertToTransactionItems(transactions);&#10;&#10;                    // Show/hide empty state&#10;                    if (transactions.isEmpty()) {&#10;                        emptyState.setVisibility(View.VISIBLE);&#10;                        rvDayTransactions.setVisibility(View.GONE);&#10;                    } else {&#10;                        emptyState.setVisibility(View.GONE);&#10;                        rvDayTransactions.setVisibility(View.VISIBLE);&#10;                    }&#10;                })&#10;                .addOnFailureListener(e -&gt; {&#10;                    Toast.makeText(this, &quot;Lỗi khi tải giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                    emptyState.setVisibility(View.VISIBLE);&#10;                    rvDayTransactions.setVisibility(View.GONE);&#10;                });&#10;    }&#10;&#10;    private void convertToTransactionItems(List&lt;Transaction&gt; transactions) {&#10;        transactionItems.clear();&#10;&#10;        // Sort transactions by time (newest first)&#10;        transactions.sort((t1, t2) -&gt; t2.getDate().compareTo(t1.getDate()));&#10;&#10;        for (Transaction transaction : transactions) {&#10;            // Get category info&#10;            Category category = categoriesMap.get(transaction.getCategoryId());&#10;            String categoryName = category != null ? category.getName() : &quot;Chưa phân loại&quot;;&#10;            String categoryIcon = category != null ? category.getIcon() : &quot;ic_other&quot;;&#10;&#10;            // Create transaction item&#10;            TransactionItem item = new TransactionItem(&#10;                    transaction.getId(),&#10;                    transaction.getTitle(),&#10;                    categoryName,&#10;                    categoryIcon,&#10;                    transaction.getAmount(),&#10;                    transaction.getType(),&#10;                    transaction.getDate()&#10;            );&#10;&#10;            // Don't show date headers for single day view&#10;            item.setShowDateHeader(false);&#10;&#10;            transactionItems.add(item);&#10;        }&#10;&#10;        // Update adapter&#10;        transactionAdapter.updateTransactions(transactionItems);&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        btnBack.setOnClickListener(v -&gt; finish());&#10;&#10;        fabAddTransaction.setOnClickListener(v -&gt; {&#10;            Intent intent = new Intent(DayDetailActivity.this, AddTransactionActivity.class);&#10;            intent.putExtra(&quot;selected_date&quot;, selectedDate.getTimeInMillis());&#10;            startActivity(intent);&#10;        });&#10;    }&#10;&#10;    @Override&#10;    protected void onResume() {&#10;        super.onResume();&#10;        // Reload data when returning to this activity&#10;        loadCategoriesAndTransactions();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.smartexpense;&#13;&#10;&#13;&#10;import android.content.Intent;&#13;&#10;import android.os.Bundle;&#13;&#10;import android.view.View;&#13;&#10;import android.widget.ImageView;&#13;&#10;import android.widget.LinearLayout;&#13;&#10;import android.widget.TextView;&#13;&#10;import android.widget.Toast;&#13;&#10;&#13;&#10;import androidx.appcompat.app.AppCompatActivity;&#13;&#10;import androidx.core.graphics.Insets;&#13;&#10;import androidx.core.view.ViewCompat;&#13;&#10;import androidx.core.view.WindowInsetsCompat;&#13;&#10;import androidx.recyclerview.widget.LinearLayoutManager;&#13;&#10;import androidx.recyclerview.widget.RecyclerView;&#13;&#10;&#13;&#10;import com.example.smartexpense.adapters.TransactionAdapter;&#13;&#10;import com.example.smartexpense.model.Category;&#13;&#10;import com.example.smartexpense.model.Transaction;&#13;&#10;import com.example.smartexpense.model.TransactionItem;&#13;&#10;import com.example.smartexpense.utils.CurrencyUtils;&#13;&#10;import com.example.smartexpense.services.FirebaseService;&#13;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#13;&#10;import com.google.firebase.Timestamp;&#13;&#10;&#13;&#10;import java.text.DecimalFormat;&#13;&#10;import java.text.DecimalFormatSymbols;&#13;&#10;import java.text.SimpleDateFormat;&#13;&#10;import java.util.ArrayList;&#13;&#10;import java.util.Calendar;&#13;&#10;import java.util.HashMap;&#13;&#10;import java.util.List;&#13;&#10;import java.util.Locale;&#13;&#10;import java.util.Map;&#13;&#10;&#13;&#10;public class DayDetailActivity extends AppCompatActivity {&#13;&#10;&#13;&#10;    private TextView tvDate;&#13;&#10;    private TextView tvDayIncome;&#13;&#10;    private TextView tvDayExpense;&#13;&#10;    private TextView tvDayBalance;&#13;&#10;    private ImageView btnBack;&#13;&#10;    private RecyclerView rvDayTransactions;&#13;&#10;    private LinearLayout emptyState;&#13;&#10;    private FloatingActionButton fabAddTransaction;&#13;&#10;&#13;&#10;    private FirebaseService firebaseService;&#13;&#10;    private TransactionAdapter transactionAdapter;&#13;&#10;    private List&lt;TransactionItem&gt; transactionItems;&#13;&#10;    private Map&lt;String, Category&gt; categoriesMap;&#13;&#10;    private Calendar selectedDate;&#13;&#10;&#13;&#10;    @Override&#13;&#10;    protected void onCreate(Bundle savedInstanceState) {&#13;&#10;        super.onCreate(savedInstanceState);&#13;&#10;        setContentView(R.layout.activity_day_detail);&#13;&#10;&#13;&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#13;&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#13;&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#13;&#10;            return insets;&#13;&#10;        });&#13;&#10;&#13;&#10;        // Get selected date from intent&#13;&#10;        long dateMillis = getIntent().getLongExtra(&quot;selected_date&quot;, System.currentTimeMillis());&#13;&#10;        selectedDate = Calendar.getInstance();&#13;&#10;        selectedDate.setTimeInMillis(dateMillis);&#13;&#10;&#13;&#10;        firebaseService = FirebaseService.getInstance();&#13;&#10;        categoriesMap = new HashMap&lt;&gt;();&#13;&#10;        transactionItems = new ArrayList&lt;&gt;();&#13;&#10;&#13;&#10;        initViews();&#13;&#10;        setupRecyclerView();&#13;&#10;        loadCategoriesAndTransactions();&#13;&#10;        setupClickListeners();&#13;&#10;    }&#13;&#10;&#13;&#10;    private void initViews() {&#13;&#10;        tvDate = findViewById(R.id.tvDate);&#13;&#10;        tvDayIncome = findViewById(R.id.tvDayIncome);&#13;&#10;        tvDayExpense = findViewById(R.id.tvDayExpense);&#13;&#10;        tvDayBalance = findViewById(R.id.tvDayBalance);&#13;&#10;        btnBack = findViewById(R.id.btnBack);&#13;&#10;        rvDayTransactions = findViewById(R.id.rvDayTransactions);&#13;&#10;        emptyState = findViewById(R.id.emptyState);&#13;&#10;        fabAddTransaction = findViewById(R.id.fab_add_transaction);&#13;&#10;&#13;&#10;        // Set date display&#13;&#10;        SimpleDateFormat sdf = new SimpleDateFormat(&quot;d 'tháng' M yyyy&quot;, new Locale(&quot;vi&quot;, &quot;VN&quot;));&#13;&#10;        tvDate.setText(sdf.format(selectedDate.getTime()));&#13;&#10;    }&#13;&#10;&#13;&#10;    private void setupRecyclerView() {&#13;&#10;        transactionAdapter = new TransactionAdapter(this, transactionItems);&#13;&#10;        rvDayTransactions.setLayoutManager(new LinearLayoutManager(this));&#13;&#10;        rvDayTransactions.setAdapter(transactionAdapter);&#13;&#10;&#13;&#10;        // Set click listener for transactions&#13;&#10;        transactionAdapter.setOnTransactionClickListener(transaction -&gt; {&#13;&#10;            Intent intent = new Intent(DayDetailActivity.this, TransactionDetailsActivity.class);&#13;&#10;            intent.putExtra(&quot;transaction_id&quot;, transaction.getId());&#13;&#10;            intent.putExtra(&quot;transaction_title&quot;, transaction.getTitle());&#13;&#10;            intent.putExtra(&quot;transaction_amount&quot;, transaction.getAmount());&#13;&#10;            intent.putExtra(&quot;transaction_type&quot;, transaction.getType());&#13;&#10;            intent.putExtra(&quot;transaction_category&quot;, transaction.getCategoryName());&#13;&#10;            intent.putExtra(&quot;transaction_date&quot;, transaction.getDate().getSeconds());&#13;&#10;            startActivity(intent);&#13;&#10;        });&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadCategoriesAndTransactions() {&#13;&#10;        // Load categories first, then transactions&#13;&#10;        firebaseService.getCategoriesByType(&quot;income&quot;)&#13;&#10;                .addOnSuccessListener(incomeCategories -&gt; {&#13;&#10;                    for (Category category : incomeCategories) {&#13;&#10;                        categoriesMap.put(category.getId(), category);&#13;&#10;                    }&#13;&#10;&#13;&#10;                    firebaseService.getCategoriesByType(&quot;expense&quot;)&#13;&#10;                            .addOnSuccessListener(expenseCategories -&gt; {&#13;&#10;                                for (Category category : expenseCategories) {&#13;&#10;                                    categoriesMap.put(category.getId(), category);&#13;&#10;                                }&#13;&#10;&#13;&#10;                                // Now load transactions for the day&#13;&#10;                                loadDayTransactions();&#13;&#10;                            })&#13;&#10;                            .addOnFailureListener(e -&gt; {&#13;&#10;                                Toast.makeText(this, &quot;Lỗi khi tải danh mục&quot;, Toast.LENGTH_SHORT).show();&#13;&#10;                                loadDayTransactions();&#13;&#10;                            });&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; {&#13;&#10;                    Toast.makeText(this, &quot;Lỗi khi tải danh mục&quot;, Toast.LENGTH_SHORT).show();&#13;&#10;                    loadDayTransactions();&#13;&#10;                });&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadDayTransactions() {&#13;&#10;        // Set start and end of day&#13;&#10;        Calendar startOfDay = (Calendar) selectedDate.clone();&#13;&#10;        startOfDay.set(Calendar.HOUR_OF_DAY, 0);&#13;&#10;        startOfDay.set(Calendar.MINUTE, 0);&#13;&#10;        startOfDay.set(Calendar.SECOND, 0);&#13;&#10;&#13;&#10;        Calendar endOfDay = (Calendar) selectedDate.clone();&#13;&#10;        endOfDay.set(Calendar.HOUR_OF_DAY, 23);&#13;&#10;        endOfDay.set(Calendar.MINUTE, 59);&#13;&#10;        endOfDay.set(Calendar.SECOND, 59);&#13;&#10;&#13;&#10;        Timestamp startTimestamp = new Timestamp(startOfDay.getTime());&#13;&#10;        Timestamp endTimestamp = new Timestamp(endOfDay.getTime());&#13;&#10;&#13;&#10;        firebaseService.getTransactionsBetweenDates(startTimestamp, endTimestamp)&#13;&#10;                .addOnSuccessListener(querySnapshot -&gt; {&#13;&#10;                    List&lt;Transaction&gt; transactions = new ArrayList&lt;&gt;();&#13;&#10;                    // Sử dụng mảng để có thể thay đổi giá trị trong lambda&#13;&#10;                    final double[] totals = new double[2]; // [0] = income, [1] = expense&#13;&#10;&#13;&#10;                    querySnapshot.forEach(document -&gt; {&#13;&#10;                        Transaction transaction = document.toObject(Transaction.class);&#13;&#10;                        transaction.setId(document.getId());&#13;&#10;                        transactions.add(transaction);&#13;&#10;&#13;&#10;                        // Calculate totals&#13;&#10;                        if (&quot;income&quot;.equals(transaction.getType())) {&#13;&#10;                            totals[0] += transaction.getAmount();&#13;&#10;                        } else if (&quot;expense&quot;.equals(transaction.getType())) {&#13;&#10;                            totals[1] += transaction.getAmount();&#13;&#10;                        }&#13;&#10;                    });&#13;&#10;&#13;&#10;                    // Update summary&#13;&#10;                    double totalIncome = totals[0];&#13;&#10;                    double totalExpense = totals[1];&#13;&#10;                    tvDayIncome.setText(CurrencyUtils.formatCurrency(totalIncome));&#13;&#10;                    tvDayExpense.setText(CurrencyUtils.formatCurrency(totalExpense));&#13;&#10;                    tvDayBalance.setText(CurrencyUtils.formatCurrency(totalIncome - totalExpense));&#13;&#10;&#13;&#10;                    // Convert to transaction items&#13;&#10;                    convertToTransactionItems(transactions);&#13;&#10;&#13;&#10;                    // Show/hide empty state&#13;&#10;                    if (transactions.isEmpty()) {&#13;&#10;                        emptyState.setVisibility(View.VISIBLE);&#13;&#10;                        rvDayTransactions.setVisibility(View.GONE);&#13;&#10;                    } else {&#13;&#10;                        emptyState.setVisibility(View.GONE);&#13;&#10;                        rvDayTransactions.setVisibility(View.VISIBLE);&#13;&#10;                    }&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; {&#13;&#10;                    Toast.makeText(this, &quot;Lỗi khi tải giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#13;&#10;                    emptyState.setVisibility(View.VISIBLE);&#13;&#10;                    rvDayTransactions.setVisibility(View.GONE);&#13;&#10;                });&#13;&#10;    }&#13;&#10;&#13;&#10;    private void convertToTransactionItems(List&lt;Transaction&gt; transactions) {&#13;&#10;        transactionItems.clear();&#13;&#10;&#13;&#10;        // Sort transactions by time (newest first)&#13;&#10;        transactions.sort((t1, t2) -&gt; t2.getDate().compareTo(t1.getDate()));&#13;&#10;&#13;&#10;        for (Transaction transaction : transactions) {&#13;&#10;            // Get category info&#13;&#10;            Category category = categoriesMap.get(transaction.getCategoryId());&#13;&#10;            String categoryName = category != null ? category.getName() : &quot;Chưa phân loại&quot;;&#13;&#10;            String categoryIcon = category != null ? category.getIcon() : &quot;ic_other&quot;;&#13;&#10;&#13;&#10;            // Create transaction item&#13;&#10;            TransactionItem item = new TransactionItem(&#13;&#10;                    transaction.getId(),&#13;&#10;                    transaction.getTitle(),&#13;&#10;                    categoryName,&#13;&#10;                    categoryIcon,&#13;&#10;                    transaction.getAmount(),&#13;&#10;                    transaction.getType(),&#13;&#10;                    transaction.getDate()&#13;&#10;            );&#13;&#10;&#13;&#10;            // Don't show date headers for single day view&#13;&#10;            item.setShowDateHeader(false);&#13;&#10;&#13;&#10;            transactionItems.add(item);&#13;&#10;        }&#13;&#10;&#13;&#10;        // Update adapter&#13;&#10;        transactionAdapter.updateTransactions(transactionItems);&#13;&#10;    }&#13;&#10;&#13;&#10;    private void setupClickListeners() {&#13;&#10;        btnBack.setOnClickListener(v -&gt; finish());&#13;&#10;&#13;&#10;        fabAddTransaction.setOnClickListener(v -&gt; {&#13;&#10;            Intent intent = new Intent(DayDetailActivity.this, AddTransactionActivity.class);&#13;&#10;            intent.putExtra(&quot;selected_date&quot;, selectedDate.getTimeInMillis());&#13;&#10;            startActivity(intent);&#13;&#10;        });&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    protected void onResume() {&#13;&#10;        super.onResume();&#13;&#10;        // Reload data when returning to this activity&#13;&#10;        loadCategoriesAndTransactions();&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/MainActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/MainActivity.java" />
              <option name="originalContent" value="package com.example.smartexpense;&#10;&#10;import android.app.AlertDialog;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.util.Log;&#10;import android.view.View;&#10;import android.widget.ImageView;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;import androidx.recyclerview.widget.LinearLayoutManager;&#10;import androidx.recyclerview.widget.RecyclerView;&#10;&#10;import com.example.smartexpense.adapters.CategoryFilterAdapter;&#10;import com.example.smartexpense.adapters.TransactionAdapter;&#10;import com.example.smartexpense.model.Category;&#10;import com.example.smartexpense.model.Transaction;&#10;import com.example.smartexpense.model.TransactionItem;&#10;import com.example.smartexpense.services.FirebaseService;&#10;import com.example.smartexpense.utils.CurrencyUtils;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#10;import com.google.firebase.auth.FirebaseAuth;&#10;import com.google.firebase.auth.FirebaseUser;&#10;&#10;import java.text.DecimalFormat;&#10;import java.text.NumberFormat;&#10;import java.text.SimpleDateFormat;&#10;import java.util.ArrayList;&#10;import java.util.Calendar;&#10;import java.util.Collections;&#10;import java.util.Date;&#10;import java.util.HashMap;&#10;import java.util.List;&#10;import java.util.Locale;&#10;import java.util.Map;&#10;&#10;public class MainActivity extends BaseActivity {&#10;    private FloatingActionButton fabAddTransaction;&#10;    private FirebaseAuth mAuth;&#10;    private TextView tvUserName;&#10;    private TextView tvBalance;&#10;    private TextView tvIncomeThisMonth;&#10;    private TextView tvExpenseThisMonth;&#10;    private TextView tvFilterCategory;&#10;    private ImageView btnFilter;&#10;&#10;    // Firebase components&#10;    private FirebaseService firebaseService;&#10;    private RecyclerView rvTransactions;&#10;    private TransactionAdapter transactionAdapter;&#10;    private List&lt;TransactionItem&gt; transactionItems;&#10;    private Map&lt;String, Category&gt; categoriesMap;&#10;&#10;    // Filter&#10;    private String currentFilterCategoryId = &quot;all&quot;;&#10;    private List&lt;Category&gt; allCategories;&#10;    private boolean categoriesLoaded = false; // Flag để tránh load trùng lặp&#10;&#10;    // Store original transactions for filtering&#10;    private List&lt;Transaction&gt; originalTransactions = new ArrayList&lt;&gt;();&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_main);&#10;&#10;        // Initialize Firebase Auth&#10;        mAuth = FirebaseAuth.getInstance();&#10;        firebaseService = FirebaseService.getInstance();&#10;&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        // Initialize bottom navigation and set Home tab as active&#10;        initBottomNavigation();&#10;        updateTabState(0);&#10;&#10;        initViews();&#10;        setupTransactionRecyclerView();&#10;        loadUserData();&#10;        loadCategoriesAndTransactions();&#10;        setupClickListeners();&#10;    }&#10;&#10;    private void initViews() {&#10;        fabAddTransaction = findViewById(R.id.fab_add_transaction);&#10;        rvTransactions = findViewById(R.id.rvTransactions);&#10;        tvUserName = findViewById(R.id.tv_user_name);&#10;        tvBalance = findViewById(R.id.tv_balance);&#10;        tvIncomeThisMonth = findViewById(R.id.tv_income_this_month);&#10;        tvExpenseThisMonth = findViewById(R.id.tv_expense_this_month);&#10;        tvFilterCategory = findViewById(R.id.tv_filter_category);&#10;        btnFilter = findViewById(R.id.btn_filter);&#10;&#10;        transactionItems = new ArrayList&lt;&gt;();&#10;        categoriesMap = new HashMap&lt;&gt;();&#10;        allCategories = new ArrayList&lt;&gt;();&#10;&#10;        // Set default filter text&#10;        tvFilterCategory.setText(&quot;Tất cả&quot;);&#10;    }&#10;&#10;    private void setupTransactionRecyclerView() {&#10;        transactionAdapter = new TransactionAdapter(this, transactionItems);&#10;        rvTransactions.setLayoutManager(new LinearLayoutManager(this));&#10;        rvTransactions.setAdapter(transactionAdapter);&#10;        rvTransactions.setNestedScrollingEnabled(false);&#10;&#10;        // Set click listener for transactions&#10;        transactionAdapter.setOnTransactionClickListener(transaction -&gt; {&#10;            Intent intent = new Intent(MainActivity.this, TransactionDetailsActivity.class);&#10;            intent.putExtra(&quot;transaction_id&quot;, transaction.getId());&#10;            intent.putExtra(&quot;transaction_title&quot;, transaction.getTitle());&#10;            intent.putExtra(&quot;transaction_amount&quot;, transaction.getAmount());&#10;            intent.putExtra(&quot;transaction_type&quot;, transaction.getType());&#10;            intent.putExtra(&quot;transaction_category&quot;, transaction.getCategoryName());&#10;            intent.putExtra(&quot;transaction_date&quot;, transaction.getDate().getSeconds());&#10;            startActivity(intent);&#10;        });&#10;    }&#10;&#10;    private void loadUserData() {&#10;        FirebaseUser currentUser = mAuth.getCurrentUser();&#10;        if (currentUser != null) {&#10;            String userId = currentUser.getUid();&#10;&#10;            // Load user profile data&#10;            firebaseService.getUserProfile(userId)&#10;                    .addOnSuccessListener(user -&gt; {&#10;                        tvUserName.setText(user.getUsername());&#10;&#10;                        // Load financial data&#10;                        loadFinancialData(userId);&#10;                    })&#10;                    .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải thông tin người dùng&quot;, Toast.LENGTH_SHORT).show());&#10;        }&#10;    }&#10;&#10;    private void loadFinancialData(String userId) {&#10;        firebaseService.getUserBalance(userId)&#10;                .addOnSuccessListener(balance -&gt; {&#10;                    // Format and set balance&#10;                    String formattedBalance = CurrencyUtils.formatCurrency(balance);&#10;                    tvBalance.setText(formattedBalance);&#10;                })&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải số dư&quot;, Toast.LENGTH_SHORT).show());&#10;&#10;        firebaseService.getIncomeThisMonth(userId)&#10;                .addOnSuccessListener(income -&gt; {&#10;                    // Format and set income&#10;                    String formattedIncome = CurrencyUtils.formatCurrency(income);&#10;                    tvIncomeThisMonth.setText(formattedIncome);&#10;                })&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải thu nhập tháng này&quot;, Toast.LENGTH_SHORT).show());&#10;&#10;        firebaseService.getExpenseThisMonth(userId)&#10;                .addOnSuccessListener(expense -&gt; {&#10;                    // Format and set expense&#10;                    String formattedExpense = CurrencyUtils.formatCurrency(expense);&#10;                    tvExpenseThisMonth.setText(formattedExpense);&#10;                })&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải chi tiêu tháng này&quot;, Toast.LENGTH_SHORT).show());&#10;    }&#10;&#10;    private void loadCategoriesAndTransactions() {&#10;        // Load categories first, then transactions&#10;        loadAllCategories();&#10;    }&#10;&#10;    private void loadAllCategories() {&#10;        // Nếu đã load categories rồi thì không load lại&#10;        if (categoriesLoaded &amp;&amp; !allCategories.isEmpty()) {&#10;            Log.d(&quot;MainActivity&quot;, &quot;Categories already loaded, skipping...&quot;);&#10;            loadTransactions();&#10;            return;&#10;        }&#10;&#10;        firebaseService.getAllCategories()&#10;                .addOnSuccessListener(categories -&gt; {&#10;                    allCategories.clear(); // Clear để tránh trùng lặp&#10;                    categoriesMap.clear(); // Clear map cũ&#10;&#10;                    // Add all categories&#10;                    allCategories.addAll(categories);&#10;                    for (Category category : categories) {&#10;                        categoriesMap.put(category.getId(), category);&#10;                    }&#10;&#10;                    categoriesLoaded = true; // Đánh dấu đã load xong&#10;&#10;                    Log.d(&quot;MainActivity&quot;, &quot;Categories loaded successfully: &quot; + allCategories.size());&#10;                    loadTransactions();&#10;                })&#10;                .addOnFailureListener(e -&gt; {&#10;                    Log.e(&quot;MainActivity&quot;, &quot;Error loading categories&quot;, e);&#10;                    Toast.makeText(this, &quot;Lỗi khi tải danh mục&quot;, Toast.LENGTH_SHORT).show();&#10;                    categoriesLoaded = true;&#10;                    loadTransactions();&#10;                });&#10;    }&#10;&#10;    private void loadTransactions() {&#10;        firebaseService.getRecentTransactions(50) // Lấy 50 giao dịch gần nhất&#10;                .addOnSuccessListener(querySnapshot -&gt; {&#10;                    List&lt;Transaction&gt; transactions = new ArrayList&lt;&gt;();&#10;                    originalTransactions.clear();&#10;&#10;                    querySnapshot.forEach(document -&gt; {&#10;                        Transaction transaction = document.toObject(Transaction.class);&#10;                        transaction.setId(document.getId());&#10;                        transactions.add(transaction);&#10;                        originalTransactions.add(transaction); // Store for filtering&#10;                    });&#10;&#10;                    // Convert to TransactionItems with date grouping&#10;                    convertToTransactionItems(transactions);&#10;                })&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show());&#10;    }&#10;&#10;    private void convertToTransactionItems(List&lt;Transaction&gt; transactions) {&#10;        transactionItems.clear();&#10;&#10;        if (transactions.isEmpty()) {&#10;            transactionAdapter.updateTransactions(transactionItems);&#10;            return;&#10;        }&#10;&#10;        // Sort transactions by date (newest first)&#10;        transactions.sort((t1, t2) -&gt; t2.getDate().compareTo(t1.getDate()));&#10;&#10;        String currentDateGroup = &quot;&quot;;&#10;&#10;        for (Transaction transaction : transactions) {&#10;            // Get category info&#10;            Category category = categoriesMap.get(transaction.getCategoryId());&#10;            String categoryName = category != null ? category.getName() : &quot;Chưa phân loại&quot;;&#10;            String categoryIcon = category != null ? category.getIcon() : &quot;ic_other&quot;;&#10;&#10;            // Format date group&#10;            String dateGroup = formatDateGroup(transaction.getDate().toDate());&#10;&#10;            // Create transaction item&#10;            TransactionItem item = new TransactionItem(&#10;                    transaction.getId(),&#10;                    transaction.getTitle(),&#10;                    categoryName,&#10;                    categoryIcon,&#10;                    transaction.getAmount(),&#10;                    transaction.getType(),&#10;                    transaction.getDate()&#10;            );&#10;&#10;            // Show date header for new date group&#10;            if (!dateGroup.equals(currentDateGroup)) {&#10;                item.setShowDateHeader(true);&#10;                item.setDateHeaderText(dateGroup);&#10;                currentDateGroup = dateGroup;&#10;            }&#10;&#10;            transactionItems.add(item);&#10;        }&#10;&#10;        // Update adapter&#10;        transactionAdapter.updateTransactions(transactionItems);&#10;    }&#10;&#10;    private String formatDateGroup(Date date) {&#10;        Calendar cal = Calendar.getInstance();&#10;        Calendar today = Calendar.getInstance();&#10;        Calendar yesterday = Calendar.getInstance();&#10;        yesterday.add(Calendar.DAY_OF_YEAR, -1);&#10;&#10;        cal.setTime(date);&#10;&#10;        // Check if it's today&#10;        if (isSameDay(cal, today)) {&#10;            return &quot;Hôm nay&quot;;&#10;        }&#10;&#10;        // Check if it's yesterday&#10;        if (isSameDay(cal, yesterday)) {&#10;            return &quot;Hôm qua&quot;;&#10;        }&#10;&#10;        // Check if it's within this week&#10;        long diffInDays = (today.getTimeInMillis() - cal.getTimeInMillis()) / (1000 * 60 * 60 * 24);&#10;        if (diffInDays &lt;= 7) {&#10;            SimpleDateFormat dayFormat = new SimpleDateFormat(&quot;EEEE&quot;, new Locale(&quot;vi&quot;, &quot;VN&quot;));&#10;            return dayFormat.format(date);&#10;        }&#10;&#10;        // Show full date for older transactions&#10;        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;EEEE, dd/MM&quot;, new Locale(&quot;vi&quot;, &quot;VN&quot;));&#10;        return dateFormat.format(date);&#10;    }&#10;&#10;    private boolean isSameDay(Calendar cal1, Calendar cal2) {&#10;        return cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &amp;&amp;&#10;                cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR);&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        fabAddTransaction.setOnClickListener(v -&gt; {&#10;            Intent intent = new Intent(MainActivity.this, AddTransactionActivity.class);&#10;            startActivity(intent);&#10;        });&#10;&#10;        btnFilter.setOnClickListener(v -&gt; showCategoryFilterDialog());&#10;    }&#10;&#10;    private void showCategoryFilterDialog() {&#10;        // Log để debug&#10;        Log.d(&quot;MainActivity&quot;, &quot;Opening filter dialog - categoriesLoaded: &quot; + categoriesLoaded);&#10;        Log.d(&quot;MainActivity&quot;, &quot;allCategories size: &quot; + allCategories.size());&#10;&#10;        // Nếu categories chưa được load, không mở dialog&#10;        if (!categoriesLoaded || allCategories.isEmpty()) {&#10;            Toast.makeText(this, &quot;Đang tải danh mục, vui lòng thử lại...&quot;, Toast.LENGTH_SHORT).show();&#10;            return;&#10;        }&#10;&#10;        // Create dialog&#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#10;        View dialogView = getLayoutInflater().inflate(R.layout.dialog_category_filter, null);&#10;        builder.setView(dialogView);&#10;&#10;        AlertDialog dialog = builder.create();&#10;&#10;        // Setup RecyclerView for categories&#10;        RecyclerView rvCategories = dialogView.findViewById(R.id.rv_categories);&#10;        TextView btnCancel = dialogView.findViewById(R.id.btn_cancel);&#10;&#10;        // Prepare categories list with &quot;Tất cả&quot; option&#10;        List&lt;Category&gt; filterCategories = new ArrayList&lt;&gt;();&#10;&#10;        // Add &quot;Tất cả&quot; option at the beginning&#10;        Category allCategory = new Category();&#10;        allCategory.setId(&quot;all&quot;);&#10;        allCategory.setName(&quot;Tất cả&quot;);&#10;        allCategory.setIcon(&quot;ic_all&quot;);&#10;        filterCategories.add(allCategory);&#10;&#10;        // Add all other categories (tạo copy để tránh reference)&#10;        for (Category category : allCategories) {&#10;            Category categoryCopy = new Category();&#10;            categoryCopy.setId(category.getId());&#10;            categoryCopy.setName(category.getName());&#10;            categoryCopy.setIcon(category.getIcon());&#10;            categoryCopy.setType(category.getType());&#10;            filterCategories.add(categoryCopy);&#10;        }&#10;&#10;        Log.d(&quot;MainActivity&quot;, &quot;Filter categories size: &quot; + filterCategories.size());&#10;&#10;        // Setup adapter&#10;        CategoryFilterAdapter adapter = new CategoryFilterAdapter(this, filterCategories);&#10;        adapter.setSelectedCategoryId(currentFilterCategoryId);&#10;        rvCategories.setLayoutManager(new LinearLayoutManager(this));&#10;        rvCategories.setAdapter(adapter);&#10;&#10;        // Set category selection listener&#10;        adapter.setOnCategorySelectedListener(category -&gt; {&#10;            currentFilterCategoryId = category.getId();&#10;            tvFilterCategory.setText(category.getName());&#10;&#10;            // Filter transactions&#10;            filterTransactionsByCategory();&#10;&#10;            dialog.dismiss();&#10;        });&#10;&#10;        // Cancel button&#10;        btnCancel.setOnClickListener(v -&gt; dialog.dismiss());&#10;&#10;        dialog.show();&#10;    }&#10;&#10;    private void filterTransactionsByCategory() {&#10;        if (originalTransactions.isEmpty()) return;&#10;&#10;        if (&quot;all&quot;.equals(currentFilterCategoryId)) {&#10;            // Show all transactions - rebuild from original data&#10;            convertToTransactionItems(originalTransactions);&#10;        } else {&#10;            // Filter by selected category&#10;            List&lt;Transaction&gt; filteredTransactions = new ArrayList&lt;&gt;();&#10;&#10;            for (Transaction transaction : originalTransactions) {&#10;                if (currentFilterCategoryId.equals(transaction.getCategoryId())) {&#10;                    filteredTransactions.add(transaction);&#10;                }&#10;            }&#10;&#10;            // Rebuild transaction items with proper date headers&#10;            convertToTransactionItems(filteredTransactions);&#10;        }&#10;    }&#10;&#10;    private Transaction findOriginalTransaction(String transactionId) {&#10;        // This method helps find the original transaction from the filtered list&#10;        // We'll need to store original transactions for filtering&#10;        return originalTransactions.stream()&#10;                .filter(t -&gt; t.getId().equals(transactionId))&#10;                .findFirst()&#10;                .orElse(null);&#10;    }&#10;&#10;    @Override&#10;    protected void onResume() {&#10;        super.onResume();&#10;&#10;        // Reload financial data&#10;        FirebaseUser currentUser = mAuth.getCurrentUser();&#10;        if (currentUser != null) {&#10;            loadFinancialData(currentUser.getUid());&#10;        }&#10;&#10;        // Chỉ refresh transactions, giữ lại filter hiện tại&#10;        if (categoriesLoaded) {&#10;            // Load lại transactions và áp dụng filter hiện tại&#10;            loadTransactionsAndApplyFilter();&#10;        } else {&#10;            loadCategoriesAndTransactions();&#10;        }&#10;    }&#10;&#10;    private void loadTransactionsAndApplyFilter() {&#10;        firebaseService.getRecentTransactions(50) // Lấy 50 giao dịch gần nhất&#10;                .addOnSuccessListener(querySnapshot -&gt; {&#10;                    List&lt;Transaction&gt; transactions = new ArrayList&lt;&gt;();&#10;                    originalTransactions.clear();&#10;&#10;                    querySnapshot.forEach(document -&gt; {&#10;                        Transaction transaction = document.toObject(Transaction.class);&#10;                        transaction.setId(document.getId());&#10;                        transactions.add(transaction);&#10;                        originalTransactions.add(transaction); // Store for filtering&#10;                    });&#10;&#10;                    // Convert to TransactionItems with date grouping&#10;                    convertToTransactionItems(transactions);&#10;&#10;                    // Áp dụng lại filter nếu không phải &quot;all&quot;&#10;                    if (!&quot;all&quot;.equals(currentFilterCategoryId)) {&#10;                        filterTransactionsByCategory();&#10;                    }&#10;                })&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show());&#10;    }&#10;&#10;    @Override&#10;    public void onStart() {&#10;        super.onStart();&#10;        // Check if user is signed in&#10;        FirebaseUser currentUser = mAuth.getCurrentUser();&#10;        if (currentUser == null) {&#10;            // User not signed in, redirect to login&#10;            Intent intent = new Intent(this, LoginActivity.class);&#10;            startActivity(intent);&#10;            finish();&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.smartexpense;&#13;&#10;&#13;&#10;import android.app.AlertDialog;&#13;&#10;import android.content.Intent;&#13;&#10;import android.os.Bundle;&#13;&#10;import android.util.Log;&#13;&#10;import android.view.View;&#13;&#10;import android.widget.ImageView;&#13;&#10;import android.widget.TextView;&#13;&#10;import android.widget.Toast;&#13;&#10;&#13;&#10;import androidx.core.graphics.Insets;&#13;&#10;import androidx.core.view.ViewCompat;&#13;&#10;import androidx.core.view.WindowInsetsCompat;&#13;&#10;import androidx.recyclerview.widget.LinearLayoutManager;&#13;&#10;import androidx.recyclerview.widget.RecyclerView;&#13;&#10;&#13;&#10;import com.example.smartexpense.adapters.CategoryFilterAdapter;&#13;&#10;import com.example.smartexpense.adapters.TransactionAdapter;&#13;&#10;import com.example.smartexpense.model.Category;&#13;&#10;import com.example.smartexpense.model.Transaction;&#13;&#10;import com.example.smartexpense.model.TransactionItem;&#13;&#10;import com.example.smartexpense.services.FirebaseService;&#13;&#10;import com.example.smartexpense.utils.CurrencyUtils;&#13;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#13;&#10;import com.google.firebase.auth.FirebaseAuth;&#13;&#10;import com.google.firebase.auth.FirebaseUser;&#13;&#10;&#13;&#10;import java.text.DecimalFormat;&#13;&#10;import java.text.NumberFormat;&#13;&#10;import java.text.SimpleDateFormat;&#13;&#10;import java.util.ArrayList;&#13;&#10;import java.util.Calendar;&#13;&#10;import java.util.Collections;&#13;&#10;import java.util.Date;&#13;&#10;import java.util.HashMap;&#13;&#10;import java.util.List;&#13;&#10;import java.util.Locale;&#13;&#10;import java.util.Map;&#13;&#10;&#13;&#10;public class MainActivity extends BaseActivity {&#13;&#10;    private FloatingActionButton fabAddTransaction;&#13;&#10;    private FirebaseAuth mAuth;&#13;&#10;    private TextView tvUserName;&#13;&#10;    private TextView tvBalance;&#13;&#10;    private TextView tvIncomeThisMonth;&#13;&#10;    private TextView tvExpenseThisMonth;&#13;&#10;    private TextView tvFilterCategory;&#13;&#10;    private ImageView btnFilter;&#13;&#10;&#13;&#10;    // Firebase components&#13;&#10;    private FirebaseService firebaseService;&#13;&#10;    private RecyclerView rvTransactions;&#13;&#10;    private TransactionAdapter transactionAdapter;&#13;&#10;    private List&lt;TransactionItem&gt; transactionItems;&#13;&#10;    private Map&lt;String, Category&gt; categoriesMap;&#13;&#10;&#13;&#10;    // Filter&#13;&#10;    private String currentFilterCategoryId = &quot;all&quot;;&#13;&#10;    private List&lt;Category&gt; allCategories;&#13;&#10;    private boolean categoriesLoaded = false; // Flag để tránh load trùng lặp&#13;&#10;&#13;&#10;    // Store original transactions for filtering&#13;&#10;    private List&lt;Transaction&gt; originalTransactions = new ArrayList&lt;&gt;();&#13;&#10;&#13;&#10;    @Override&#13;&#10;    protected void onCreate(Bundle savedInstanceState) {&#13;&#10;        super.onCreate(savedInstanceState);&#13;&#10;        setContentView(R.layout.activity_main);&#13;&#10;&#13;&#10;        // Initialize Firebase Auth&#13;&#10;        mAuth = FirebaseAuth.getInstance();&#13;&#10;        firebaseService = FirebaseService.getInstance();&#13;&#10;&#13;&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#13;&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#13;&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#13;&#10;            return insets;&#13;&#10;        });&#13;&#10;&#13;&#10;        // Initialize bottom navigation and set Home tab as active&#13;&#10;        initBottomNavigation();&#13;&#10;        updateTabState(0);&#13;&#10;&#13;&#10;        initViews();&#13;&#10;        setupTransactionRecyclerView();&#13;&#10;        loadUserData();&#13;&#10;        loadCategoriesAndTransactions();&#13;&#10;        setupClickListeners();&#13;&#10;    }&#13;&#10;&#13;&#10;    private void initViews() {&#13;&#10;        fabAddTransaction = findViewById(R.id.fab_add_transaction);&#13;&#10;        rvTransactions = findViewById(R.id.rvTransactions);&#13;&#10;        tvUserName = findViewById(R.id.tv_user_name);&#13;&#10;        tvBalance = findViewById(R.id.tv_balance);&#13;&#10;        tvIncomeThisMonth = findViewById(R.id.tv_income_this_month);&#13;&#10;        tvExpenseThisMonth = findViewById(R.id.tv_expense_this_month);&#13;&#10;        tvFilterCategory = findViewById(R.id.tv_filter_category);&#13;&#10;        btnFilter = findViewById(R.id.btn_filter);&#13;&#10;&#13;&#10;        transactionItems = new ArrayList&lt;&gt;();&#13;&#10;        categoriesMap = new HashMap&lt;&gt;();&#13;&#10;        allCategories = new ArrayList&lt;&gt;();&#13;&#10;&#13;&#10;        // Set default filter text&#13;&#10;        tvFilterCategory.setText(&quot;Tất cả&quot;);&#13;&#10;    }&#13;&#10;&#13;&#10;    private void setupTransactionRecyclerView() {&#13;&#10;        transactionAdapter = new TransactionAdapter(this, transactionItems);&#13;&#10;        rvTransactions.setLayoutManager(new LinearLayoutManager(this));&#13;&#10;        rvTransactions.setAdapter(transactionAdapter);&#13;&#10;        rvTransactions.setNestedScrollingEnabled(false);&#13;&#10;&#13;&#10;        // Set click listener for transactions&#13;&#10;        transactionAdapter.setOnTransactionClickListener(transaction -&gt; {&#13;&#10;            Intent intent = new Intent(MainActivity.this, TransactionDetailsActivity.class);&#13;&#10;            intent.putExtra(&quot;transaction_id&quot;, transaction.getId());&#13;&#10;            intent.putExtra(&quot;transaction_title&quot;, transaction.getTitle());&#13;&#10;            intent.putExtra(&quot;transaction_amount&quot;, transaction.getAmount());&#13;&#10;            intent.putExtra(&quot;transaction_type&quot;, transaction.getType());&#13;&#10;            intent.putExtra(&quot;transaction_category&quot;, transaction.getCategoryName());&#13;&#10;            intent.putExtra(&quot;transaction_date&quot;, transaction.getDate().getSeconds());&#13;&#10;            startActivity(intent);&#13;&#10;        });&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadUserData() {&#13;&#10;        FirebaseUser currentUser = mAuth.getCurrentUser();&#13;&#10;        if (currentUser != null) {&#13;&#10;            String userId = currentUser.getUid();&#13;&#10;&#13;&#10;            // Load user profile data&#13;&#10;            firebaseService.getUserProfile(userId)&#13;&#10;                    .addOnSuccessListener(user -&gt; {&#13;&#10;                        tvUserName.setText(user.getUsername());&#13;&#10;&#13;&#10;                        // Load financial data&#13;&#10;                        loadFinancialData(userId);&#13;&#10;                    })&#13;&#10;                    .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải thông tin người dùng&quot;, Toast.LENGTH_SHORT).show());&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadFinancialData(String userId) {&#13;&#10;        firebaseService.getUserBalance(userId)&#13;&#10;                .addOnSuccessListener(balance -&gt; {&#13;&#10;                    // Format and set balance&#13;&#10;                    String formattedBalance = CurrencyUtils.formatCurrency(balance);&#13;&#10;                    tvBalance.setText(formattedBalance);&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải số dư&quot;, Toast.LENGTH_SHORT).show());&#13;&#10;&#13;&#10;        firebaseService.getIncomeThisMonth(userId)&#13;&#10;                .addOnSuccessListener(income -&gt; {&#13;&#10;                    // Format and set income&#13;&#10;                    String formattedIncome = CurrencyUtils.formatCurrency(income);&#13;&#10;                    tvIncomeThisMonth.setText(formattedIncome);&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải thu nhập tháng này&quot;, Toast.LENGTH_SHORT).show());&#13;&#10;&#13;&#10;        firebaseService.getExpenseThisMonth(userId)&#13;&#10;                .addOnSuccessListener(expense -&gt; {&#13;&#10;                    // Format and set expense&#13;&#10;                    String formattedExpense = CurrencyUtils.formatCurrency(expense);&#13;&#10;                    tvExpenseThisMonth.setText(formattedExpense);&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải chi tiêu tháng này&quot;, Toast.LENGTH_SHORT).show());&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadCategoriesAndTransactions() {&#13;&#10;        // Load categories first, then transactions&#13;&#10;        loadAllCategories();&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadAllCategories() {&#13;&#10;        // Nếu đã load categories rồi thì không load lại&#13;&#10;        if (categoriesLoaded &amp;&amp; !allCategories.isEmpty()) {&#13;&#10;            Log.d(&quot;MainActivity&quot;, &quot;Categories already loaded, skipping...&quot;);&#13;&#10;            loadTransactions();&#13;&#10;            return;&#13;&#10;        }&#13;&#10;&#13;&#10;        firebaseService.getAllCategories()&#13;&#10;                .addOnSuccessListener(categories -&gt; {&#13;&#10;                    allCategories.clear(); // Clear để tránh trùng lặp&#13;&#10;                    categoriesMap.clear(); // Clear map cũ&#13;&#10;&#13;&#10;                    // Add all categories&#13;&#10;                    allCategories.addAll(categories);&#13;&#10;                    for (Category category : categories) {&#13;&#10;                        categoriesMap.put(category.getId(), category);&#13;&#10;                    }&#13;&#10;&#13;&#10;                    categoriesLoaded = true; // Đánh dấu đã load xong&#13;&#10;&#13;&#10;                    Log.d(&quot;MainActivity&quot;, &quot;Categories loaded successfully: &quot; + allCategories.size());&#13;&#10;                    loadTransactions();&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; {&#13;&#10;                    Log.e(&quot;MainActivity&quot;, &quot;Error loading categories&quot;, e);&#13;&#10;                    Toast.makeText(this, &quot;Lỗi khi tải danh mục&quot;, Toast.LENGTH_SHORT).show();&#13;&#10;                    categoriesLoaded = true;&#13;&#10;                    loadTransactions();&#13;&#10;                });&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadTransactions() {&#13;&#10;        firebaseService.getRecentTransactions(50) // Lấy 50 giao dịch gần nhất&#13;&#10;                .addOnSuccessListener(querySnapshot -&gt; {&#13;&#10;                    List&lt;Transaction&gt; transactions = new ArrayList&lt;&gt;();&#13;&#10;                    originalTransactions.clear();&#13;&#10;&#13;&#10;                    querySnapshot.forEach(document -&gt; {&#13;&#10;                        Transaction transaction = document.toObject(Transaction.class);&#13;&#10;                        transaction.setId(document.getId());&#13;&#10;                        transactions.add(transaction);&#13;&#10;                        originalTransactions.add(transaction); // Store for filtering&#13;&#10;                    });&#13;&#10;&#13;&#10;                    // Convert to TransactionItems with date grouping&#13;&#10;                    convertToTransactionItems(transactions);&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show());&#13;&#10;    }&#13;&#10;&#13;&#10;    private void convertToTransactionItems(List&lt;Transaction&gt; transactions) {&#13;&#10;        transactionItems.clear();&#13;&#10;&#13;&#10;        if (transactions.isEmpty()) {&#13;&#10;            transactionAdapter.updateTransactions(transactionItems);&#13;&#10;            return;&#13;&#10;        }&#13;&#10;&#13;&#10;        // Sort transactions by date (newest first)&#13;&#10;        transactions.sort((t1, t2) -&gt; t2.getDate().compareTo(t1.getDate()));&#13;&#10;&#13;&#10;        String currentDateGroup = &quot;&quot;;&#13;&#10;&#13;&#10;        for (Transaction transaction : transactions) {&#13;&#10;            // Get category info&#13;&#10;            Category category = categoriesMap.get(transaction.getCategoryId());&#13;&#10;            String categoryName = category != null ? category.getName() : &quot;Chưa phân loại&quot;;&#13;&#10;            String categoryIcon = category != null ? category.getIcon() : &quot;ic_other&quot;;&#13;&#10;&#13;&#10;            // Format date group&#13;&#10;            String dateGroup = formatDateGroup(transaction.getDate().toDate());&#13;&#10;&#13;&#10;            // Create transaction item&#13;&#10;            TransactionItem item = new TransactionItem(&#13;&#10;                    transaction.getId(),&#13;&#10;                    transaction.getTitle(),&#13;&#10;                    categoryName,&#13;&#10;                    categoryIcon,&#13;&#10;                    transaction.getAmount(),&#13;&#10;                    transaction.getType(),&#13;&#10;                    transaction.getDate()&#13;&#10;            );&#13;&#10;&#13;&#10;            // Show date header for new date group&#13;&#10;            if (!dateGroup.equals(currentDateGroup)) {&#13;&#10;                item.setShowDateHeader(true);&#13;&#10;                item.setDateHeaderText(dateGroup);&#13;&#10;                currentDateGroup = dateGroup;&#13;&#10;            }&#13;&#10;&#13;&#10;            transactionItems.add(item);&#13;&#10;        }&#13;&#10;&#13;&#10;        // Update adapter&#13;&#10;        transactionAdapter.updateTransactions(transactionItems);&#13;&#10;    }&#13;&#10;&#13;&#10;    private String formatDateGroup(Date date) {&#13;&#10;        Calendar cal = Calendar.getInstance();&#13;&#10;        Calendar today = Calendar.getInstance();&#13;&#10;        Calendar yesterday = Calendar.getInstance();&#13;&#10;        yesterday.add(Calendar.DAY_OF_YEAR, -1);&#13;&#10;&#13;&#10;        cal.setTime(date);&#13;&#10;&#13;&#10;        // Check if it's today&#13;&#10;        if (isSameDay(cal, today)) {&#13;&#10;            return &quot;Hôm nay&quot;;&#13;&#10;        }&#13;&#10;&#13;&#10;        // Check if it's yesterday&#13;&#10;        if (isSameDay(cal, yesterday)) {&#13;&#10;            return &quot;Hôm qua&quot;;&#13;&#10;        }&#13;&#10;&#13;&#10;        // Check if it's within this week&#13;&#10;        long diffInDays = (today.getTimeInMillis() - cal.getTimeInMillis()) / (1000 * 60 * 60 * 24);&#13;&#10;        if (diffInDays &lt;= 7) {&#13;&#10;            SimpleDateFormat dayFormat = new SimpleDateFormat(&quot;EEEE&quot;, new Locale(&quot;vi&quot;, &quot;VN&quot;));&#13;&#10;            return dayFormat.format(date);&#13;&#10;        }&#13;&#10;&#13;&#10;        // Show full date for older transactions&#13;&#10;        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;EEEE, dd/MM&quot;, new Locale(&quot;vi&quot;, &quot;VN&quot;));&#13;&#10;        return dateFormat.format(date);&#13;&#10;    }&#13;&#10;&#13;&#10;    private boolean isSameDay(Calendar cal1, Calendar cal2) {&#13;&#10;        return cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &amp;&amp;&#13;&#10;                cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR);&#13;&#10;    }&#13;&#10;&#13;&#10;    private void setupClickListeners() {&#13;&#10;        fabAddTransaction.setOnClickListener(v -&gt; {&#13;&#10;            Intent intent = new Intent(MainActivity.this, AddTransactionActivity.class);&#13;&#10;            startActivity(intent);&#13;&#10;        });&#13;&#10;&#13;&#10;        btnFilter.setOnClickListener(v -&gt; showCategoryFilterDialog());&#13;&#10;    }&#13;&#10;&#13;&#10;    private void showCategoryFilterDialog() {&#13;&#10;        // Log để debug&#13;&#10;        Log.d(&quot;MainActivity&quot;, &quot;Opening filter dialog - categoriesLoaded: &quot; + categoriesLoaded);&#13;&#10;        Log.d(&quot;MainActivity&quot;, &quot;allCategories size: &quot; + allCategories.size());&#13;&#10;&#13;&#10;        // Nếu categories chưa được load, không mở dialog&#13;&#10;        if (!categoriesLoaded || allCategories.isEmpty()) {&#13;&#10;            Toast.makeText(this, &quot;Đang tải danh mục, vui lòng thử lại...&quot;, Toast.LENGTH_SHORT).show();&#13;&#10;            return;&#13;&#10;        }&#13;&#10;&#13;&#10;        // Create dialog&#13;&#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#13;&#10;        View dialogView = getLayoutInflater().inflate(R.layout.dialog_category_filter, null);&#13;&#10;        builder.setView(dialogView);&#13;&#10;&#13;&#10;        AlertDialog dialog = builder.create();&#13;&#10;&#13;&#10;        // Setup RecyclerView for categories&#13;&#10;        RecyclerView rvCategories = dialogView.findViewById(R.id.rv_categories);&#13;&#10;        TextView btnCancel = dialogView.findViewById(R.id.btn_cancel);&#13;&#10;&#13;&#10;        // Prepare categories list with &quot;Tất cả&quot; option&#13;&#10;        List&lt;Category&gt; filterCategories = new ArrayList&lt;&gt;();&#13;&#10;&#13;&#10;        // Add &quot;Tất cả&quot; option at the beginning&#13;&#10;        Category allCategory = new Category();&#13;&#10;        allCategory.setId(&quot;all&quot;);&#13;&#10;        allCategory.setName(&quot;Tất cả&quot;);&#13;&#10;        allCategory.setIcon(&quot;ic_all&quot;);&#13;&#10;        filterCategories.add(allCategory);&#13;&#10;&#13;&#10;        // Add all other categories (tạo copy để tránh reference)&#13;&#10;        for (Category category : allCategories) {&#13;&#10;            Category categoryCopy = new Category();&#13;&#10;            categoryCopy.setId(category.getId());&#13;&#10;            categoryCopy.setName(category.getName());&#13;&#10;            categoryCopy.setIcon(category.getIcon());&#13;&#10;            categoryCopy.setType(category.getType());&#13;&#10;            filterCategories.add(categoryCopy);&#13;&#10;        }&#13;&#10;&#13;&#10;        Log.d(&quot;MainActivity&quot;, &quot;Filter categories size: &quot; + filterCategories.size());&#13;&#10;&#13;&#10;        // Setup adapter&#13;&#10;        CategoryFilterAdapter adapter = new CategoryFilterAdapter(this, filterCategories);&#13;&#10;        adapter.setSelectedCategoryId(currentFilterCategoryId);&#13;&#10;        rvCategories.setLayoutManager(new LinearLayoutManager(this));&#13;&#10;        rvCategories.setAdapter(adapter);&#13;&#10;&#13;&#10;        // Set category selection listener&#13;&#10;        adapter.setOnCategorySelectedListener(category -&gt; {&#13;&#10;            currentFilterCategoryId = category.getId();&#13;&#10;            tvFilterCategory.setText(category.getName());&#13;&#10;&#13;&#10;            // Filter transactions&#13;&#10;            filterTransactionsByCategory();&#13;&#10;&#13;&#10;            dialog.dismiss();&#13;&#10;        });&#13;&#10;&#13;&#10;        // Cancel button&#13;&#10;        btnCancel.setOnClickListener(v -&gt; dialog.dismiss());&#13;&#10;&#13;&#10;        dialog.show();&#13;&#10;    }&#13;&#10;&#13;&#10;    private void filterTransactionsByCategory() {&#13;&#10;        if (originalTransactions.isEmpty()) return;&#13;&#10;&#13;&#10;        if (&quot;all&quot;.equals(currentFilterCategoryId)) {&#13;&#10;            // Show all transactions - rebuild from original data&#13;&#10;            convertToTransactionItems(originalTransactions);&#13;&#10;        } else {&#13;&#10;            // Filter by selected category&#13;&#10;            List&lt;Transaction&gt; filteredTransactions = new ArrayList&lt;&gt;();&#13;&#10;&#13;&#10;            for (Transaction transaction : originalTransactions) {&#13;&#10;                if (currentFilterCategoryId.equals(transaction.getCategoryId())) {&#13;&#10;                    filteredTransactions.add(transaction);&#13;&#10;                }&#13;&#10;            }&#13;&#10;&#13;&#10;            // Rebuild transaction items with proper date headers&#13;&#10;            convertToTransactionItems(filteredTransactions);&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    private Transaction findOriginalTransaction(String transactionId) {&#13;&#10;        // This method helps find the original transaction from the filtered list&#13;&#10;        // We'll need to store original transactions for filtering&#13;&#10;        return originalTransactions.stream()&#13;&#10;                .filter(t -&gt; t.getId().equals(transactionId))&#13;&#10;                .findFirst()&#13;&#10;                .orElse(null);&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    protected void onResume() {&#13;&#10;        super.onResume();&#13;&#10;&#13;&#10;        // Reload financial data&#13;&#10;        FirebaseUser currentUser = mAuth.getCurrentUser();&#13;&#10;        if (currentUser != null) {&#13;&#10;            loadFinancialData(currentUser.getUid());&#13;&#10;        }&#13;&#10;&#13;&#10;        // Chỉ refresh transactions, giữ lại filter hiện tại&#13;&#10;        if (categoriesLoaded) {&#13;&#10;            // Load lại transactions và áp dụng filter hiện tại&#13;&#10;            loadTransactionsAndApplyFilter();&#13;&#10;        } else {&#13;&#10;            loadCategoriesAndTransactions();&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    private void loadTransactionsAndApplyFilter() {&#13;&#10;        firebaseService.getRecentTransactions(50) // Lấy 50 giao dịch gần nhất&#13;&#10;                .addOnSuccessListener(querySnapshot -&gt; {&#13;&#10;                    List&lt;Transaction&gt; transactions = new ArrayList&lt;&gt;();&#13;&#10;                    originalTransactions.clear();&#13;&#10;&#13;&#10;                    querySnapshot.forEach(document -&gt; {&#13;&#10;                        Transaction transaction = document.toObject(Transaction.class);&#13;&#10;                        transaction.setId(document.getId());&#13;&#10;                        transactions.add(transaction);&#13;&#10;                        originalTransactions.add(transaction); // Store for filtering&#13;&#10;                    });&#13;&#10;&#13;&#10;                    // Convert to TransactionItems with date grouping&#13;&#10;                    convertToTransactionItems(transactions);&#13;&#10;&#13;&#10;                    // Áp dụng lại filter nếu không phải &quot;all&quot;&#13;&#10;                    if (!&quot;all&quot;.equals(currentFilterCategoryId)) {&#13;&#10;                        filterTransactionsByCategory();&#13;&#10;                    }&#13;&#10;                })&#13;&#10;                .addOnFailureListener(e -&gt; Toast.makeText(this, &quot;Lỗi khi tải giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show());&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onStart() {&#13;&#10;        super.onStart();&#13;&#10;        // Check if user is signed in&#13;&#10;        FirebaseUser currentUser = mAuth.getCurrentUser();&#13;&#10;        if (currentUser == null) {&#13;&#10;            // User not signed in, redirect to login&#13;&#10;            Intent intent = new Intent(this, LoginActivity.class);&#13;&#10;            startActivity(intent);&#13;&#10;            finish();&#13;&#10;        }&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/TransactionDetailsActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/TransactionDetailsActivity.java" />
              <option name="originalContent" value="package com.example.smartexpense;&#10;&#10;import android.app.DatePickerDialog;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.view.View;&#10;import android.widget.EditText;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.TextView;&#10;import android.widget.DatePicker;&#10;import android.widget.Toast;&#10;import androidx.appcompat.app.AlertDialog;&#10;import androidx.core.content.ContextCompat;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;import com.example.smartexpense.model.Category;&#10;import com.example.smartexpense.services.FirebaseService;&#10;import com.example.smartexpense.utils.CurrencyUtils;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.firebase.Timestamp;&#10;&#10;import java.text.SimpleDateFormat;&#10;import java.util.ArrayList;&#10;import java.util.Calendar;&#10;import java.util.Date;&#10;import java.util.List;&#10;import java.util.Locale;&#10;&#10;public class TransactionDetailsActivity extends AppCompatActivity {&#10;&#10;    ImageView btnBack, ivCategoryIcon;&#10;    LinearLayout layoutTransactionType, layoutCategory, layoutDate;&#10;    TextView tvTransactionType, tvCategory, tvDate;&#10;    TextView tvAmount, tvBadge;&#10;    EditText etTitle, etAmount;&#10;    MaterialButton btnUpdate, btnDelete;&#10;&#10;    // Firebase&#10;    private FirebaseService firebaseService;&#10;    private List&lt;Category&gt; currentCategories = new ArrayList&lt;&gt;();&#10;    private Category selectedCategory;&#10;&#10;    // Transaction data&#10;    private String transactionId;&#10;    private String transactionTitle;&#10;    private double transactionAmount;&#10;    private String transactionType;&#10;    private String transactionCategory;&#10;    private String transactionCategoryId;&#10;    private long transactionDateSeconds;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_transaction_details);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        firebaseService = FirebaseService.getInstance();&#10;&#10;        initViews();&#10;        loadTransactionData();&#10;        setupClickListeners();&#10;    }&#10;&#10;    private void initViews() {&#10;        btnBack = findViewById(R.id.btn_back);&#10;        ivCategoryIcon = findViewById(R.id.iv_category_icon);&#10;        layoutTransactionType = findViewById(R.id.layout_transaction_type);&#10;        layoutCategory = findViewById(R.id.layout_category);&#10;        layoutDate = findViewById(R.id.layout_date);&#10;        tvTransactionType = findViewById(R.id.tv_transaction_type);&#10;        tvCategory = findViewById(R.id.tv_category);&#10;        tvDate = findViewById(R.id.tv_date);&#10;        tvAmount = findViewById(R.id.tv_amount);&#10;        tvBadge = findViewById(R.id.tv_badge);&#10;        etTitle = findViewById(R.id.et_title);&#10;        etAmount = findViewById(R.id.et_amount);&#10;        btnUpdate = findViewById(R.id.btn_update);&#10;        btnDelete = findViewById(R.id.btn_delete);&#10;    }&#10;&#10;    private void loadTransactionData() {&#10;        // Get data from Intent&#10;        Intent intent = getIntent();&#10;        if (intent != null) {&#10;            transactionId = intent.getStringExtra(&quot;transaction_id&quot;);&#10;            transactionTitle = intent.getStringExtra(&quot;transaction_title&quot;);&#10;            transactionAmount = intent.getDoubleExtra(&quot;transaction_amount&quot;, 0.0);&#10;            transactionType = intent.getStringExtra(&quot;transaction_type&quot;);&#10;            transactionCategory = intent.getStringExtra(&quot;transaction_category&quot;);&#10;            transactionDateSeconds = intent.getLongExtra(&quot;transaction_date&quot;, 0);&#10;&#10;            // Load transaction details from Firebase để lấy category ID&#10;            loadTransactionFromFirebase();&#10;        }&#10;    }&#10;&#10;    private void loadTransactionFromFirebase() {&#10;        if (transactionId == null) return;&#10;        &#10;        firebaseService.getTransactionById(transactionId)&#10;            .addOnSuccessListener(documentSnapshot -&gt; {&#10;                if (documentSnapshot.exists()) {&#10;                    // Lấy category ID từ Firebase&#10;                    transactionCategoryId = documentSnapshot.getString(&quot;categoryId&quot;);&#10;                    &#10;                    // Load categories và hiển thị dữ liệu&#10;                    loadCategoriesAndDisplay();&#10;                } else {&#10;                    // Nếu không tìm thấy transaction, vẫn hiển thị dữ liệu cơ bản&#10;                    displayBasicTransactionInfo();&#10;                    loadCategories();&#10;                }&#10;            })&#10;            .addOnFailureListener(e -&gt; {&#10;                Toast.makeText(this, &quot;Lỗi khi tải chi tiết giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                displayBasicTransactionInfo();&#10;                loadCategories();&#10;            });&#10;    }&#10;&#10;    private void loadCategoriesAndDisplay() {&#10;        if (transactionType == null) return;&#10;        &#10;        firebaseService.getCategoriesByType(transactionType)&#10;            .addOnSuccessListener(categories -&gt; {&#10;                currentCategories = categories;&#10;                &#10;                // Tìm category hiện tại dựa trên ID&#10;                selectedCategory = null;&#10;                for (Category category : categories) {&#10;                    if (category.getId().equals(transactionCategoryId)) {&#10;                        selectedCategory = category;&#10;                        break;&#10;                    }&#10;                }&#10;                &#10;                // Hiển thị thông tin transaction&#10;                displayTransactionInfo();&#10;            })&#10;            .addOnFailureListener(e -&gt; {&#10;                Toast.makeText(this, &quot;Lỗi khi tải danh mục: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                displayBasicTransactionInfo();&#10;            });&#10;    }&#10;&#10;    private void loadCategories() {&#10;        if (transactionType == null) return;&#10;        &#10;        firebaseService.getCategoriesByType(transactionType)&#10;            .addOnSuccessListener(categories -&gt; {&#10;                currentCategories = categories;&#10;            })&#10;            .addOnFailureListener(e -&gt; {&#10;                Toast.makeText(this, &quot;Lỗi khi tải danh mục: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;            });&#10;    }&#10;&#10;    private void displayTransactionInfo() {&#10;        // Set title in EditText&#10;        if (etTitle != null &amp;&amp; transactionTitle != null) {&#10;            etTitle.setText(transactionTitle);&#10;        }&#10;&#10;        // Set amount in EditText (số nguyên cho việc edit)&#10;        if (etAmount != null) {&#10;            etAmount.setText(String.valueOf((long) transactionAmount));&#10;        }&#10;&#10;        // Hiển thị amount với format VNĐ&#10;        displayFormattedAmount();&#10;&#10;        // Set transaction type và badge&#10;        displayTransactionTypeAndBadge();&#10;&#10;        // Set category icon và name&#10;        if (selectedCategory != null) {&#10;            tvCategory.setText(selectedCategory.getName());&#10;            &#10;            // Set category icon&#10;            int iconRes = getCategoryIconResource(selectedCategory.getIcon());&#10;            ivCategoryIcon.setImageResource(iconRes);&#10;        } else {&#10;            tvCategory.setText(transactionCategory != null ? transactionCategory : &quot;Chưa chọn danh mục&quot;);&#10;            ivCategoryIcon.setImageResource(R.drawable.ic_other);&#10;        }&#10;&#10;        // Set date&#10;        if (transactionDateSeconds &gt; 0) {&#10;            Date date = new Date(transactionDateSeconds * 1000);&#10;            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;            tvDate.setText(dateFormat.format(date));&#10;        }&#10;    }&#10;&#10;    private void displayBasicTransactionInfo() {&#10;        // Set title in EditText&#10;        if (etTitle != null &amp;&amp; transactionTitle != null) {&#10;            etTitle.setText(transactionTitle);&#10;        }&#10;&#10;        // Set amount in EditText&#10;        if (etAmount != null) {&#10;            etAmount.setText(String.valueOf((long) transactionAmount));&#10;        }&#10;&#10;        // Hiển thị amount với format VNĐ&#10;        displayFormattedAmount();&#10;&#10;        // Set transaction type và badge&#10;        displayTransactionTypeAndBadge();&#10;&#10;        // Set category&#10;        if (transactionCategory != null) {&#10;            tvCategory.setText(transactionCategory);&#10;        }&#10;&#10;        // Set default icon&#10;        ivCategoryIcon.setImageResource(R.drawable.ic_other);&#10;&#10;        // Set date&#10;        if (transactionDateSeconds &gt; 0) {&#10;            Date date = new Date(transactionDateSeconds * 1000);&#10;            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;            tvDate.setText(dateFormat.format(date));&#10;        }&#10;    }&#10;&#10;    private void displayFormattedAmount() {&#10;        if (tvAmount == null) return;&#10;        &#10;        String formattedAmount;&#10;        int amountColor;&#10;&#10;        if (&quot;income&quot;.equals(transactionType)) {&#10;            formattedAmount = &quot;+ &quot; + CurrencyUtils.formatCurrency(transactionAmount);&#10;            amountColor = ContextCompat.getColor(this, R.color.income);&#10;        } else {&#10;            formattedAmount = &quot;- &quot; + CurrencyUtils.formatCurrency(transactionAmount);&#10;            amountColor = ContextCompat.getColor(this, R.color.expense);&#10;        }&#10;&#10;        tvAmount.setText(formattedAmount);&#10;        tvAmount.setTextColor(amountColor);&#10;    }&#10;&#10;    private void displayTransactionTypeAndBadge() {&#10;        if (transactionType != null) {&#10;            if (&quot;income&quot;.equals(transactionType)) {&#10;                tvTransactionType.setText(&quot;Thu nhập&quot;);&#10;                tvBadge.setText(&quot;Thu nhập&quot;);&#10;                tvBadge.setTextColor(ContextCompat.getColor(this, R.color.income));&#10;                tvBadge.setBackgroundResource(R.drawable.bg_income_badge);&#10;            } else {&#10;                tvTransactionType.setText(&quot;Chi tiêu&quot;);&#10;                tvBadge.setText(&quot;Chi tiêu&quot;);&#10;                tvBadge.setTextColor(ContextCompat.getColor(this, R.color.expense));&#10;                tvBadge.setBackgroundResource(R.drawable.bg_expense_badge);&#10;            }&#10;        }&#10;    }&#10;&#10;    private int getCategoryIconResource(String iconName) {&#10;        if (iconName == null) return R.drawable.ic_other;&#10;&#10;        switch (iconName) {&#10;            case &quot;ic_salary&quot;: return R.drawable.ic_salary;&#10;            case &quot;ic_bonus&quot;: return R.drawable.ic_bonus;&#10;            case &quot;ic_investment&quot;: return R.drawable.ic_investment;&#10;            case &quot;ic_food&quot;: return R.drawable.ic_food;&#10;            case &quot;ic_shopping&quot;: return R.drawable.ic_shopping;&#10;            case &quot;ic_bills&quot;: return R.drawable.ic_bills;&#10;            case &quot;ic_health&quot;: return R.drawable.ic_health;&#10;            case &quot;ic_entertainment&quot;: return R.drawable.ic_entertainment;&#10;            case &quot;ic_education&quot;: return R.drawable.ic_education;&#10;            case &quot;ic_transport&quot;: return R.drawable.ic_transport;&#10;            default: return R.drawable.ic_other;&#10;        }&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        btnBack.setOnClickListener(v -&gt; finish());&#10;&#10;        // Transaction Type Dropdown&#10;        layoutTransactionType.setOnClickListener(v -&gt; showTransactionTypeDialog());&#10;&#10;        // Category Dropdown&#10;        layoutCategory.setOnClickListener(v -&gt; showCategoryDialog());&#10;&#10;        // Date Picker&#10;        layoutDate.setOnClickListener(v -&gt; showDatePickerDialog());&#10;&#10;        // Update button&#10;        btnUpdate.setOnClickListener(v -&gt; updateTransaction());&#10;&#10;        // Delete button&#10;        btnDelete.setOnClickListener(v -&gt; deleteTransaction());&#10;    }&#10;&#10;    private void showTransactionTypeDialog() {&#10;        String[] transactionTypes = {&quot;Thu nhập&quot;, &quot;Chi tiêu&quot;};&#10;        &#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#10;        builder.setTitle(&quot;Chọn loại giao dịch&quot;);&#10;        builder.setItems(transactionTypes, (dialog, which) -&gt; {&#10;            String oldType = transactionType;&#10;            transactionType = which == 0 ? &quot;income&quot; : &quot;expense&quot;;&#10;            &#10;            tvTransactionType.setText(transactionTypes[which]);&#10;            &#10;            // Cập nhật badge và màu sắc&#10;            displayTransactionTypeAndBadge();&#10;            displayFormattedAmount();&#10;            &#10;            // Nếu thay đổi type, load lại categories&#10;            if (!transactionType.equals(oldType)) {&#10;                selectedCategory = null;&#10;                tvCategory.setText(&quot;Chọn danh mục&quot;);&#10;                ivCategoryIcon.setImageResource(R.drawable.ic_other);&#10;                loadCategories();&#10;            }&#10;        });&#10;        builder.show();&#10;    }&#10;&#10;    private void showCategoryDialog() {&#10;        if (currentCategories.isEmpty()) {&#10;            Toast.makeText(this, &quot;Đang tải danh mục...&quot;, Toast.LENGTH_SHORT).show();&#10;            return;&#10;        }&#10;&#10;        String[] categoryNames = new String[currentCategories.size()];&#10;        for (int i = 0; i &lt; currentCategories.size(); i++) {&#10;            categoryNames[i] = currentCategories.get(i).getName();&#10;        }&#10;&#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#10;        builder.setTitle(&quot;Chọn danh mục&quot;);&#10;        builder.setItems(categoryNames, (dialog, which) -&gt; {&#10;            selectedCategory = currentCategories.get(which);&#10;            tvCategory.setText(selectedCategory.getName());&#10;            &#10;            // Cập nhật icon&#10;            int iconRes = getCategoryIconResource(selectedCategory.getIcon());&#10;            ivCategoryIcon.setImageResource(iconRes);&#10;        });&#10;        builder.show();&#10;    }&#10;&#10;    private void showDatePickerDialog() {&#10;        Calendar calendar = Calendar.getInstance();&#10;        if (transactionDateSeconds &gt; 0) {&#10;            calendar.setTimeInMillis(transactionDateSeconds * 1000);&#10;        }&#10;        &#10;        int year = calendar.get(Calendar.YEAR);&#10;        int month = calendar.get(Calendar.MONTH);&#10;        int day = calendar.get(Calendar.DAY_OF_MONTH);&#10;&#10;        DatePickerDialog datePickerDialog = new DatePickerDialog(&#10;                this,&#10;                (view, selectedYear, selectedMonth, selectedDay) -&gt; {&#10;                    String selectedDate = String.format(&quot;%02d/%02d/%d&quot;, selectedDay, selectedMonth + 1, selectedYear);&#10;                    tvDate.setText(selectedDate);&#10;                    &#10;                    // Update the timestamp&#10;                    Calendar cal = Calendar.getInstance();&#10;                    cal.set(selectedYear, selectedMonth, selectedDay);&#10;                    transactionDateSeconds = cal.getTimeInMillis() / 1000;&#10;                },&#10;                year, month, day&#10;        );&#10;        &#10;        // Don't allow future dates&#10;        datePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis());&#10;        datePickerDialog.show();&#10;    }&#10;&#10;    private void updateTransaction() {&#10;        // Get updated values&#10;        String newTitle = etTitle.getText().toString().trim();&#10;        String amountStr = etAmount.getText().toString().trim();&#10;        &#10;        if (newTitle.isEmpty()) {&#10;            etTitle.setError(&quot;Vui lòng nhập tiêu đề&quot;);&#10;            return;&#10;        }&#10;        &#10;        if (amountStr.isEmpty()) {&#10;            etAmount.setError(&quot;Vui lòng nhập số tiền&quot;);&#10;            return;&#10;        }&#10;        &#10;        if (selectedCategory == null) {&#10;            Toast.makeText(this, &quot;Vui lòng chọn danh mục&quot;, Toast.LENGTH_SHORT).show();&#10;            return;&#10;        }&#10;        &#10;        try {&#10;            double newAmount = Double.parseDouble(amountStr);&#10;            if (newAmount &lt;= 0) {&#10;                etAmount.setError(&quot;Số tiền phải lớn hơn 0&quot;);&#10;                return;&#10;            }&#10;            &#10;            // Cập nhật transaction trong Firebase&#10;            Timestamp timestamp = new Timestamp(transactionDateSeconds, 0);&#10;            &#10;            firebaseService.updateTransaction(transactionId, newTitle, newAmount, transactionType, &#10;                    selectedCategory.getId(), timestamp)&#10;                .addOnSuccessListener(aVoid -&gt; {&#10;                    Toast.makeText(this, &quot;Cập nhật giao dịch thành công!&quot;, Toast.LENGTH_SHORT).show();&#10;                    finish();&#10;                })&#10;                .addOnFailureListener(e -&gt; {&#10;                    Toast.makeText(this, &quot;Lỗi khi cập nhật: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                });&#10;            &#10;        } catch (NumberFormatException e) {&#10;            etAmount.setError(&quot;Số tiền không hợp lệ&quot;);&#10;        }&#10;    }&#10;&#10;    private void deleteTransaction() {&#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#10;        builder.setTitle(&quot;Xóa giao dịch&quot;);&#10;        builder.setMessage(&quot;Bạn có chắc chắn muốn xóa giao dịch này không?&quot;);&#10;        builder.setPositiveButton(&quot;Xóa&quot;, (dialog, which) -&gt; {&#10;            firebaseService.deleteTransaction(transactionId)&#10;                .addOnSuccessListener(aVoid -&gt; {&#10;                    Toast.makeText(this, &quot;Xóa giao dịch thành công!&quot;, Toast.LENGTH_SHORT).show();&#10;                    finish();&#10;                })&#10;                .addOnFailureListener(e -&gt; {&#10;                    Toast.makeText(this, &quot;Lỗi khi xóa: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                });&#10;        });&#10;        builder.setNegativeButton(&quot;Hủy&quot;, null);&#10;        builder.show();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.smartexpense;&#10;&#10;import android.app.DatePickerDialog;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.view.View;&#10;import android.widget.EditText;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.TextView;&#10;import android.widget.DatePicker;&#10;import android.widget.Toast;&#10;import androidx.appcompat.app.AlertDialog;&#10;import androidx.core.content.ContextCompat;&#10;&#10;import androidx.activity.EdgeToEdge;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.graphics.Insets;&#10;import androidx.core.view.ViewCompat;&#10;import androidx.core.view.WindowInsetsCompat;&#10;import com.example.smartexpense.model.Category;&#10;import com.example.smartexpense.services.FirebaseService;&#10;import com.example.smartexpense.utils.CurrencyUtils;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.firebase.Timestamp;&#10;&#10;import java.text.SimpleDateFormat;&#10;import java.util.ArrayList;&#10;import java.util.Calendar;&#10;import java.util.Date;&#10;import java.util.List;&#10;import java.util.Locale;&#10;&#10;public class TransactionDetailsActivity extends AppCompatActivity {&#10;&#10;    ImageView btnBack, ivCategoryIcon;&#10;    LinearLayout layoutTransactionType, layoutCategory, layoutDate;&#10;    TextView tvTransactionType, tvCategory, tvDate;&#10;    TextView tvAmount, tvBadge;&#10;    EditText etTitle, etAmount;&#10;    MaterialButton btnUpdate, btnDelete;&#10;&#10;    // Firebase&#10;    private FirebaseService firebaseService;&#10;    private List&lt;Category&gt; currentCategories = new ArrayList&lt;&gt;();&#10;    private Category selectedCategory;&#10;&#10;    // Transaction data&#10;    private String transactionId;&#10;    private String transactionTitle;&#10;    private double transactionAmount;&#10;    private String transactionType;&#10;    private String transactionCategory;&#10;    private String transactionCategoryId;&#10;    private long transactionDateSeconds;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        EdgeToEdge.enable(this);&#10;        setContentView(R.layout.activity_transaction_details);&#10;        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {&#10;            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());&#10;            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);&#10;            return insets;&#10;        });&#10;&#10;        firebaseService = FirebaseService.getInstance();&#10;&#10;        initViews();&#10;        loadTransactionData();&#10;        setupClickListeners();&#10;    }&#10;&#10;    private void initViews() {&#10;        btnBack = findViewById(R.id.btn_back);&#10;        ivCategoryIcon = findViewById(R.id.iv_category_icon);&#10;        layoutTransactionType = findViewById(R.id.layout_transaction_type);&#10;        layoutCategory = findViewById(R.id.layout_category);&#10;        layoutDate = findViewById(R.id.layout_date);&#10;        tvTransactionType = findViewById(R.id.tv_transaction_type);&#10;        tvCategory = findViewById(R.id.tv_category);&#10;        tvDate = findViewById(R.id.tv_date);&#10;        tvAmount = findViewById(R.id.tv_amount);&#10;        tvBadge = findViewById(R.id.tv_badge);&#10;        etTitle = findViewById(R.id.et_title);&#10;        etAmount = findViewById(R.id.et_amount);&#10;        btnUpdate = findViewById(R.id.btn_update);&#10;        btnDelete = findViewById(R.id.btn_delete);&#10;    }&#10;&#10;    private void loadTransactionData() {&#10;        // Get data from Intent&#10;        Intent intent = getIntent();&#10;        if (intent != null) {&#10;            transactionId = intent.getStringExtra(&quot;transaction_id&quot;);&#10;            transactionTitle = intent.getStringExtra(&quot;transaction_title&quot;);&#10;            transactionAmount = intent.getDoubleExtra(&quot;transaction_amount&quot;, 0.0);&#10;            transactionType = intent.getStringExtra(&quot;transaction_type&quot;);&#10;            transactionCategory = intent.getStringExtra(&quot;transaction_category&quot;);&#10;            transactionDateSeconds = intent.getLongExtra(&quot;transaction_date&quot;, 0);&#10;&#10;            // Load transaction details from Firebase để lấy category ID&#10;            loadTransactionFromFirebase();&#10;        }&#10;    }&#10;&#10;    private void loadTransactionFromFirebase() {&#10;        if (transactionId == null) return;&#10;        &#10;        firebaseService.getTransactionById(transactionId)&#10;            .addOnSuccessListener(documentSnapshot -&gt; {&#10;                if (documentSnapshot.exists()) {&#10;                    // Lấy category ID từ Firebase&#10;                    transactionCategoryId = documentSnapshot.getString(&quot;categoryId&quot;);&#10;                    &#10;                    // Load categories và hiển thị dữ liệu&#10;                    loadCategoriesAndDisplay();&#10;                } else {&#10;                    // Nếu không tìm thấy transaction, vẫn hiển thị dữ liệu cơ bản&#10;                    displayBasicTransactionInfo();&#10;                    loadCategories();&#10;                }&#10;            })&#10;            .addOnFailureListener(e -&gt; {&#10;                Toast.makeText(this, &quot;Lỗi khi tải chi tiết giao dịch: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                displayBasicTransactionInfo();&#10;                loadCategories();&#10;            });&#10;    }&#10;&#10;    private void loadCategoriesAndDisplay() {&#10;        if (transactionType == null) return;&#10;        &#10;        firebaseService.getCategoriesByType(transactionType)&#10;            .addOnSuccessListener(categories -&gt; {&#10;                currentCategories = categories;&#10;                &#10;                // Tìm category hiện tại dựa trên ID&#10;                selectedCategory = null;&#10;                for (Category category : categories) {&#10;                    if (category.getId().equals(transactionCategoryId)) {&#10;                        selectedCategory = category;&#10;                        break;&#10;                    }&#10;                }&#10;                &#10;                // Hiển thị thông tin transaction&#10;                displayTransactionInfo();&#10;            })&#10;            .addOnFailureListener(e -&gt; {&#10;                Toast.makeText(this, &quot;Lỗi khi tải danh mục: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                displayBasicTransactionInfo();&#10;            });&#10;    }&#10;&#10;    private void loadCategories() {&#10;        if (transactionType == null) return;&#10;        &#10;        firebaseService.getCategoriesByType(transactionType)&#10;            .addOnSuccessListener(categories -&gt; {&#10;                currentCategories = categories;&#10;            })&#10;            .addOnFailureListener(e -&gt; {&#10;                Toast.makeText(this, &quot;Lỗi khi tải danh mục: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;            });&#10;    }&#10;&#10;    private void displayTransactionInfo() {&#10;        // Set title in EditText&#10;        if (etTitle != null &amp;&amp; transactionTitle != null) {&#10;            etTitle.setText(transactionTitle);&#10;        }&#10;&#10;        // Set amount in EditText (số nguyên cho việc edit)&#10;        if (etAmount != null) {&#10;            etAmount.setText(String.valueOf((long) transactionAmount));&#10;        }&#10;&#10;        // Hiển thị amount với format VNĐ&#10;        displayFormattedAmount();&#10;&#10;        // Set transaction type và badge&#10;        displayTransactionTypeAndBadge();&#10;&#10;        // Set category icon và name&#10;        if (selectedCategory != null) {&#10;            tvCategory.setText(selectedCategory.getName());&#10;            &#10;            // Set category icon&#10;            int iconRes = getCategoryIconResource(selectedCategory.getIcon());&#10;            ivCategoryIcon.setImageResource(iconRes);&#10;        } else {&#10;            tvCategory.setText(transactionCategory != null ? transactionCategory : &quot;Chưa chọn danh mục&quot;);&#10;            ivCategoryIcon.setImageResource(R.drawable.ic_other);&#10;        }&#10;&#10;        // Set date&#10;        if (transactionDateSeconds &gt; 0) {&#10;            Date date = new Date(transactionDateSeconds * 1000);&#10;            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;            tvDate.setText(dateFormat.format(date));&#10;        }&#10;    }&#10;&#10;    private void displayBasicTransactionInfo() {&#10;        // Set title in EditText&#10;        if (etTitle != null &amp;&amp; transactionTitle != null) {&#10;            etTitle.setText(transactionTitle);&#10;        }&#10;&#10;        // Set amount in EditText&#10;        if (etAmount != null) {&#10;            etAmount.setText(String.valueOf((long) transactionAmount));&#10;        }&#10;&#10;        // Hiển thị amount với format VNĐ&#10;        displayFormattedAmount();&#10;&#10;        // Set transaction type và badge&#10;        displayTransactionTypeAndBadge();&#10;&#10;        // Set category&#10;        if (transactionCategory != null) {&#10;            tvCategory.setText(transactionCategory);&#10;        }&#10;&#10;        // Set default icon&#10;        ivCategoryIcon.setImageResource(R.drawable.ic_other);&#10;&#10;        // Set date&#10;        if (transactionDateSeconds &gt; 0) {&#10;            Date date = new Date(transactionDateSeconds * 1000);&#10;            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;            tvDate.setText(dateFormat.format(date));&#10;        }&#10;    }&#10;&#10;    private void displayFormattedAmount() {&#10;        if (tvAmount == null) return;&#10;        &#10;        String formattedAmount;&#10;        int amountColor;&#10;&#10;        if (&quot;income&quot;.equals(transactionType)) {&#10;            formattedAmount = &quot;+ &quot; + CurrencyUtils.formatCurrency(transactionAmount);&#10;            amountColor = ContextCompat.getColor(this, R.color.income);&#10;        } else {&#10;            formattedAmount = &quot;- &quot; + CurrencyUtils.formatCurrency(transactionAmount);&#10;            amountColor = ContextCompat.getColor(this, R.color.expense);&#10;        }&#10;&#10;        tvAmount.setText(formattedAmount);&#10;        tvAmount.setTextColor(amountColor);&#10;    }&#10;&#10;    private void displayTransactionTypeAndBadge() {&#10;        if (transactionType != null) {&#10;            if (&quot;income&quot;.equals(transactionType)) {&#10;                tvTransactionType.setText(&quot;Thu nhập&quot;);&#10;                tvBadge.setText(&quot;Thu nhập&quot;);&#10;                tvBadge.setTextColor(ContextCompat.getColor(this, R.color.income));&#10;                tvBadge.setBackgroundResource(R.drawable.bg_income_badge);&#10;            } else {&#10;                tvTransactionType.setText(&quot;Chi tiêu&quot;);&#10;                tvBadge.setText(&quot;Chi tiêu&quot;);&#10;                tvBadge.setTextColor(ContextCompat.getColor(this, R.color.expense));&#10;                tvBadge.setBackgroundResource(R.drawable.bg_expense_badge);&#10;            }&#10;        }&#10;    }&#10;&#10;    private int getCategoryIconResource(String iconName) {&#10;        if (iconName == null) return R.drawable.ic_other;&#10;&#10;        switch (iconName) {&#10;            case &quot;ic_salary&quot;: return R.drawable.ic_salary;&#10;            case &quot;ic_bonus&quot;: return R.drawable.ic_bonus;&#10;            case &quot;ic_investment&quot;: return R.drawable.ic_investment;&#10;            case &quot;ic_food&quot;: return R.drawable.ic_food;&#10;            case &quot;ic_shopping&quot;: return R.drawable.ic_shopping;&#10;            case &quot;ic_bills&quot;: return R.drawable.ic_bills;&#10;            case &quot;ic_health&quot;: return R.drawable.ic_health;&#10;            case &quot;ic_entertainment&quot;: return R.drawable.ic_entertainment;&#10;            case &quot;ic_education&quot;: return R.drawable.ic_education;&#10;            case &quot;ic_transport&quot;: return R.drawable.ic_transport;&#10;            default: return R.drawable.ic_other;&#10;        }&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        btnBack.setOnClickListener(v -&gt; finish());&#10;&#10;        // Transaction Type Dropdown&#10;        layoutTransactionType.setOnClickListener(v -&gt; showTransactionTypeDialog());&#10;&#10;        // Category Dropdown&#10;        layoutCategory.setOnClickListener(v -&gt; showCategoryDialog());&#10;&#10;        // Date Picker&#10;        layoutDate.setOnClickListener(v -&gt; showDatePickerDialog());&#10;&#10;        // Update button&#10;        btnUpdate.setOnClickListener(v -&gt; updateTransaction());&#10;&#10;        // Delete button&#10;        btnDelete.setOnClickListener(v -&gt; deleteTransaction());&#10;    }&#10;&#10;    private void showTransactionTypeDialog() {&#10;        String[] transactionTypes = {&quot;Thu nhập&quot;, &quot;Chi tiêu&quot;};&#10;        &#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#10;        builder.setTitle(&quot;Chọn loại giao dịch&quot;);&#10;        builder.setItems(transactionTypes, (dialog, which) -&gt; {&#10;            String oldType = transactionType;&#10;            transactionType = which == 0 ? &quot;income&quot; : &quot;expense&quot;;&#10;            &#10;            tvTransactionType.setText(transactionTypes[which]);&#10;            &#10;            // Cập nhật badge và màu sắc&#10;            displayTransactionTypeAndBadge();&#10;            displayFormattedAmount();&#10;            &#10;            // Nếu thay đổi type, load lại categories&#10;            if (!transactionType.equals(oldType)) {&#10;                selectedCategory = null;&#10;                tvCategory.setText(&quot;Chọn danh mục&quot;);&#10;                ivCategoryIcon.setImageResource(R.drawable.ic_other);&#10;                loadCategories();&#10;            }&#10;        });&#10;        builder.show();&#10;    }&#10;&#10;    private void showCategoryDialog() {&#10;        if (currentCategories.isEmpty()) {&#10;            Toast.makeText(this, &quot;Đang tải danh mục...&quot;, Toast.LENGTH_SHORT).show();&#10;            return;&#10;        }&#10;&#10;        String[] categoryNames = new String[currentCategories.size()];&#10;        for (int i = 0; i &lt; currentCategories.size(); i++) {&#10;            categoryNames[i] = currentCategories.get(i).getName();&#10;        }&#10;&#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#10;        builder.setTitle(&quot;Chọn danh mục&quot;);&#10;        builder.setItems(categoryNames, (dialog, which) -&gt; {&#10;            selectedCategory = currentCategories.get(which);&#10;            tvCategory.setText(selectedCategory.getName());&#10;            &#10;            // Cập nhật icon&#10;            int iconRes = getCategoryIconResource(selectedCategory.getIcon());&#10;            ivCategoryIcon.setImageResource(iconRes);&#10;        });&#10;        builder.show();&#10;    }&#10;&#10;    private void showDatePickerDialog() {&#10;        Calendar calendar = Calendar.getInstance();&#10;        if (transactionDateSeconds &gt; 0) {&#10;            calendar.setTimeInMillis(transactionDateSeconds * 1000);&#10;        }&#10;        &#10;        int year = calendar.get(Calendar.YEAR);&#10;        int month = calendar.get(Calendar.MONTH);&#10;        int day = calendar.get(Calendar.DAY_OF_MONTH);&#10;&#10;        DatePickerDialog datePickerDialog = new DatePickerDialog(&#10;                this,&#10;                (view, selectedYear, selectedMonth, selectedDay) -&gt; {&#10;                    String selectedDate = String.format(&quot;%02d/%02d/%d&quot;, selectedDay, selectedMonth + 1, selectedYear);&#10;                    tvDate.setText(selectedDate);&#10;                    &#10;                    // Update the timestamp&#10;                    Calendar cal = Calendar.getInstance();&#10;                    cal.set(selectedYear, selectedMonth, selectedDay);&#10;                    transactionDateSeconds = cal.getTimeInMillis() / 1000;&#10;                },&#10;                year, month, day&#10;        );&#10;        &#10;        // Don't allow future dates&#10;        datePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis());&#10;        datePickerDialog.show();&#10;    }&#10;&#10;    private void updateTransaction() {&#10;        // Get updated values&#10;        String newTitle = etTitle.getText().toString().trim();&#10;        String amountStr = etAmount.getText().toString().trim();&#10;        &#10;        if (newTitle.isEmpty()) {&#10;            etTitle.setError(&quot;Vui lòng nhập tiêu đề&quot;);&#10;            return;&#10;        }&#10;        &#10;        if (amountStr.isEmpty()) {&#10;            etAmount.setError(&quot;Vui lòng nhập số tiền&quot;);&#10;            return;&#10;        }&#10;        &#10;        if (selectedCategory == null) {&#10;            Toast.makeText(this, &quot;Vui lòng chọn danh mục&quot;, Toast.LENGTH_SHORT).show();&#10;            return;&#10;        }&#10;        &#10;        try {&#10;            double newAmount = Double.parseDouble(amountStr);&#10;            if (newAmount &lt;= 0) {&#10;                etAmount.setError(&quot;Số tiền phải lớn hơn 0&quot;);&#10;                return;&#10;            }&#10;            &#10;            // Cập nhật transaction trong Firebase&#10;            Timestamp timestamp = new Timestamp(transactionDateSeconds, 0);&#10;            &#10;            firebaseService.updateTransaction(transactionId, newTitle, newAmount, transactionType, &#10;                    selectedCategory.getId(), timestamp)&#10;                .addOnSuccessListener(aVoid -&gt; {&#10;                    Toast.makeText(this, &quot;Cập nhật giao dịch thành công!&quot;, Toast.LENGTH_SHORT).show();&#10;                    finish();&#10;                })&#10;                .addOnFailureListener(e -&gt; {&#10;                    Toast.makeText(this, &quot;Lỗi khi cập nhật: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                });&#10;            &#10;        } catch (NumberFormatException e) {&#10;            etAmount.setError(&quot;Số tiền không hợp lệ&quot;);&#10;        }&#10;    }&#10;&#10;    private void deleteTransaction() {&#10;        AlertDialog.Builder builder = new AlertDialog.Builder(this);&#10;        builder.setTitle(&quot;Xóa giao dịch&quot;);&#10;        builder.setMessage(&quot;Bạn có chắc chắn muốn xóa giao dịch này không?&quot;);&#10;        builder.setPositiveButton(&quot;Xóa&quot;, (dialog, which) -&gt; {&#10;            firebaseService.deleteTransaction(transactionId)&#10;                .addOnSuccessListener(aVoid -&gt; {&#10;                    Toast.makeText(this, &quot;Xóa giao dịch thành công!&quot;, Toast.LENGTH_SHORT).show();&#10;                    finish();&#10;                })&#10;                .addOnFailureListener(e -&gt; {&#10;                    Toast.makeText(this, &quot;Lỗi khi xóa: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();&#10;                });&#10;        });&#10;        builder.setNegativeButton(&quot;Hủy&quot;, null);&#10;        builder.show();&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/VerifyOTPActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/VerifyOTPActivity.java" />
              <option name="originalContent" value="package com.example.smartexpense;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.text.Editable;&#10;import android.text.TextWatcher;&#10;import android.view.View;&#10;import android.widget.Button;&#10;import android.widget.EditText;&#10;import android.widget.TextView;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;&#10;public class VerifyOTPActivity extends AppCompatActivity {&#10;&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5;&#10;    private Button btnVerify;&#10;    private TextView tvResend;&#10;    private String email;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_verify_otp);&#10;&#10;        // Get email from intent&#10;        email = getIntent().getStringExtra(&quot;email&quot;);&#10;&#10;        initViews();&#10;        setupClickListeners();&#10;        setupOtpInputs();&#10;    }&#10;&#10;    private void initViews() {&#10;        etOtp1 = findViewById(R.id.et_otp_1);&#10;        etOtp2 = findViewById(R.id.et_otp_2);&#10;        etOtp3 = findViewById(R.id.et_otp_3);&#10;        etOtp4 = findViewById(R.id.et_otp_4);&#10;        etOtp5 = findViewById(R.id.et_otp_5);&#10;        btnVerify = findViewById(R.id.btn_verify);&#10;        tvResend = findViewById(R.id.tv_resend);&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        btnVerify.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                String otp = etOtp1.getText().toString() +&#10;                           etOtp2.getText().toString() +&#10;                           etOtp3.getText().toString() +&#10;                           etOtp4.getText().toString() +&#10;                           etOtp5.getText().toString();&#10;&#10;                if (otp.length() == 5) {&#10;                    // TODO: Verify OTP&#10;                    // Navigate to ResetPasswordActivity after successful OTP verification&#10;                    Intent intent = new Intent(VerifyOTPActivity.this, ResetPasswordActivity.class);&#10;                    intent.putExtra(&quot;email&quot;, email);&#10;                    startActivity(intent);&#10;                    finish();&#10;                }&#10;            }&#10;        });&#10;&#10;        tvResend.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // TODO: Resend OTP&#10;                // Show toast or confirmation&#10;            }&#10;        });&#10;    }&#10;&#10;    private void setupOtpInputs() {&#10;        EditText[] otpInputs = {etOtp1, etOtp2, etOtp3, etOtp4, etOtp5};&#10;&#10;        for (int i = 0; i &lt; otpInputs.length; i++) {&#10;            final int currentIndex = i;&#10;            final EditText currentInput = otpInputs[i];&#10;&#10;            currentInput.addTextChangedListener(new TextWatcher() {&#10;                @Override&#10;                public void beforeTextChanged(CharSequence s, int start, int count, int after) {}&#10;&#10;                @Override&#10;                public void onTextChanged(CharSequence s, int start, int before, int count) {}&#10;&#10;                @Override&#10;                public void afterTextChanged(Editable s) {&#10;                    if (s.length() == 1) {&#10;                        // Move to next input&#10;                        if (currentIndex &lt; otpInputs.length - 1) {&#10;                            otpInputs[currentIndex + 1].requestFocus();&#10;                        }&#10;                    } else if (s.length() == 0) {&#10;                        // Move to previous input when deleting&#10;                        if (currentIndex &gt; 0) {&#10;                            otpInputs[currentIndex - 1].requestFocus();&#10;                        }&#10;                    }&#10;                }&#10;            });&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.smartexpense;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.text.Editable;&#10;import android.text.TextWatcher;&#10;import android.view.View;&#10;import android.widget.Button;&#10;import android.widget.EditText;&#10;import android.widget.TextView;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;&#10;public class VerifyOTPActivity extends AppCompatActivity {&#10;&#10;    private EditText etOtp1, etOtp2, etOtp3, etOtp4, etOtp5;&#10;    private Button btnVerify;&#10;    private TextView tvResend;&#10;    private String email;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_verify_otp);&#10;&#10;        // Get email from intent&#10;        email = getIntent().getStringExtra(&quot;email&quot;);&#10;&#10;        initViews();&#10;        setupClickListeners();&#10;        setupOtpInputs();&#10;    }&#10;&#10;    private void initViews() {&#10;        etOtp1 = findViewById(R.id.et_otp_1);&#10;        etOtp2 = findViewById(R.id.et_otp_2);&#10;        etOtp3 = findViewById(R.id.et_otp_3);&#10;        etOtp4 = findViewById(R.id.et_otp_4);&#10;        etOtp5 = findViewById(R.id.et_otp_5);&#10;        btnVerify = findViewById(R.id.btn_verify);&#10;        tvResend = findViewById(R.id.tv_resend);&#10;    }&#10;&#10;    private void setupClickListeners() {&#10;        btnVerify.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                String otp = etOtp1.getText().toString() +&#10;                           etOtp2.getText().toString() +&#10;                           etOtp3.getText().toString() +&#10;                           etOtp4.getText().toString() +&#10;                           etOtp5.getText().toString();&#10;&#10;                if (otp.length() == 5) {&#10;                    // TODO: Verify OTP&#10;                    // Navigate to ResetPasswordActivity after successful OTP verification&#10;                    Intent intent = new Intent(VerifyOTPActivity.this, ResetPasswordActivity.class);&#10;                    intent.putExtra(&quot;email&quot;, email);&#10;                    startActivity(intent);&#10;                    finish();&#10;                }&#10;            }&#10;        });&#10;&#10;        tvResend.setOnClickListener(new View.OnClickListener() {&#10;            @Override&#10;            public void onClick(View v) {&#10;                // TODO: Resend OTP&#10;                // Show toast or confirmation&#10;            }&#10;        });&#10;    }&#10;&#10;    private void setupOtpInputs() {&#10;        EditText[] otpInputs = {etOtp1, etOtp2, etOtp3, etOtp4, etOtp5};&#10;&#10;        for (int i = 0; i &lt; otpInputs.length; i++) {&#10;            final int currentIndex = i;&#10;            final EditText currentInput = otpInputs[i];&#10;&#10;            currentInput.addTextChangedListener(new TextWatcher() {&#10;                @Override&#10;                public void beforeTextChanged(CharSequence s, int start, int count, int after) {}&#10;&#10;                @Override&#10;                public void onTextChanged(CharSequence s, int start, int before, int count) {}&#10;&#10;                @Override&#10;                public void afterTextChanged(Editable s) {&#10;                    if (s.length() == 1) {&#10;                        // Move to next input&#10;                        if (currentIndex &lt; otpInputs.length - 1) {&#10;                            otpInputs[currentIndex + 1].requestFocus();&#10;                        }&#10;                    } else if (s.length() == 0) {&#10;                        // Move to previous input when deleting&#10;                        if (currentIndex &gt; 0) {&#10;                            otpInputs[currentIndex - 1].requestFocus();&#10;                        }&#10;                    }&#10;                }&#10;            });&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/model/Category.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/model/Category.java" />
              <option name="originalContent" value="package com.example.smartexpense.model;&#10;&#10;import com.google.firebase.Timestamp;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;public class Category {&#10;    private String id;&#10;    private String name;&#10;    private String icon;&#10;    private String type; // &quot;income&quot; or &quot;expense&quot;&#10;    private Timestamp createdAt;&#10;    private Timestamp updatedAt;&#10;&#10;    public Category() {&#10;    }&#10;&#10;    public Category(String id, String name, String icon, String type) {&#10;        this.id = id;&#10;        this.name = name;&#10;        this.icon = icon;&#10;        this.type = type;&#10;        this.createdAt = Timestamp.now();&#10;        this.updatedAt = Timestamp.now();&#10;    }&#10;&#10;    // Getters&#10;    public String getId() { return id; }&#10;&#10;    public String getName() { return name; }&#10;&#10;    public String getIcon() { return icon; }&#10;&#10;    public String getType() { return type; }&#10;&#10;    public Timestamp getCreatedAt() { return createdAt; }&#10;&#10;    public Timestamp getUpdatedAt() { return updatedAt; }&#10;&#10;    // Setters&#10;    public void setId(String id) { this.id = id; }&#10;&#10;    public void setName(String name) { this.name = name; }&#10;&#10;    public void setIcon(String icon) { this.icon = icon; }&#10;&#10;    public void setType(String type) { this.type = type; }&#10;&#10;    public void setCreatedAt(Timestamp createdAt) { this.createdAt = createdAt; }&#10;&#10;    public void setUpdatedAt(Timestamp updatedAt) { this.updatedAt = updatedAt; }&#10;&#10;    // Convert to Map for Firestore&#10;    public Map&lt;String, Object&gt; toMap() {&#10;        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();&#10;        map.put(&quot;id&quot;, id);&#10;        map.put(&quot;name&quot;, name);&#10;        map.put(&quot;icon&quot;, icon);&#10;        map.put(&quot;type&quot;, type);&#10;        map.put(&quot;createdAt&quot;, createdAt);&#10;        map.put(&quot;updatedAt&quot;, updatedAt);&#10;        return map;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.smartexpense.model;&#10;&#10;import com.google.firebase.Timestamp;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;public class Category {&#10;    private String id;&#10;    private String name;&#10;    private String icon;&#10;    private String type; // &quot;income&quot; or &quot;expense&quot;&#10;    private Timestamp createdAt;&#10;    private Timestamp updatedAt;&#10;&#10;    public Category() {&#10;    }&#10;&#10;    public Category(String id, String name, String icon, String type) {&#10;        this.id = id;&#10;        this.name = name;&#10;        this.icon = icon;&#10;        this.type = type;&#10;        this.createdAt = Timestamp.now();&#10;        this.updatedAt = Timestamp.now();&#10;    }&#10;&#10;    // Getters&#10;    public String getId() { return id; }&#10;&#10;    public String getName() { return name; }&#10;&#10;    public String getIcon() { return icon; }&#10;&#10;    public String getType() { return type; }&#10;&#10;    public Timestamp getCreatedAt() { return createdAt; }&#10;&#10;    public Timestamp getUpdatedAt() { return updatedAt; }&#10;&#10;    // Setters&#10;    public void setId(String id) { this.id = id; }&#10;&#10;    public void setName(String name) { this.name = name; }&#10;&#10;    public void setIcon(String icon) { this.icon = icon; }&#10;&#10;    public void setType(String type) { this.type = type; }&#10;&#10;    public void setCreatedAt(Timestamp createdAt) { this.createdAt = createdAt; }&#10;&#10;    public void setUpdatedAt(Timestamp updatedAt) { this.updatedAt = updatedAt; }&#10;&#10;    // Convert to Map for Firestore&#10;    public Map&lt;String, Object&gt; toMap() {&#10;        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();&#10;        map.put(&quot;id&quot;, id);&#10;        map.put(&quot;name&quot;, name);&#10;        map.put(&quot;icon&quot;, icon);&#10;        map.put(&quot;type&quot;, type);&#10;        map.put(&quot;createdAt&quot;, createdAt);&#10;        map.put(&quot;updatedAt&quot;, updatedAt);&#10;        return map;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/model/UserProfile.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/model/UserProfile.java" />
              <option name="updatedContent" value="package com.example.smartexpense.model;&#10;&#10;public class UserProfile {&#10;    private String id;&#10;    private String name;&#10;    private String email;&#10;    private String phone;&#10;    private String avatar;&#10;&#10;    public UserProfile() {}&#10;&#10;    public UserProfile(String id, String name, String email, String phone, String avatar) {&#10;        this.id = id;&#10;        this.name = name;&#10;        this.email = email;&#10;        this.phone = phone;&#10;        this.avatar = avatar;&#10;    }&#10;&#10;    // Getters&#10;    public String getId() { return id; }&#10;    public String getName() { return name; }&#10;    public String getEmail() { return email; }&#10;    public String getPhone() { return phone; }&#10;    public String getAvatar() { return avatar; }&#10;&#10;    // Setters&#10;    public void setId(String id) { this.id = id; }&#10;    public void setName(String name) { this.name = name; }&#10;    public void setEmail(String email) { this.email = email; }&#10;    public void setPhone(String phone) { this.phone = phone; }&#10;    public void setAvatar(String avatar) { this.avatar = avatar; }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/models/Transaction.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/smartexpense/models/Transaction.java" />
              <option name="updatedContent" value="package com.example.smartexpense.models;&#10;&#10;import java.util.Date;&#10;&#10;public class Transaction {&#10;    private String id;&#10;    private String userId;&#10;    private String categoryId;&#10;    private double amount;&#10;    private String description;&#10;    private String type; // &quot;income&quot; or &quot;expense&quot;&#10;    private Date date;&#10;    private long timestamp;&#10;&#10;    public Transaction() {&#10;        // Required empty constructor for Firestore&#10;    }&#10;&#10;    public Transaction(String userId, String categoryId, double amount, String description, String type, Date date) {&#10;        this.userId = userId;&#10;        this.categoryId = categoryId;&#10;        this.amount = amount;&#10;        this.description = description;&#10;        this.type = type;&#10;        this.date = date;&#10;        this.timestamp = date.getTime();&#10;    }&#10;&#10;    // Getters and Setters&#10;    public String getId() {&#10;        return id;&#10;    }&#10;&#10;    public void setId(String id) {&#10;        this.id = id;&#10;    }&#10;&#10;    public String getUserId() {&#10;        return userId;&#10;    }&#10;&#10;    public void setUserId(String userId) {&#10;        this.userId = userId;&#10;    }&#10;&#10;    public String getCategoryId() {&#10;        return categoryId;&#10;    }&#10;&#10;    public void setCategoryId(String categoryId) {&#10;        this.categoryId = categoryId;&#10;    }&#10;&#10;    public double getAmount() {&#10;        return amount;&#10;    }&#10;&#10;    public void setAmount(double amount) {&#10;        this.amount = amount;&#10;    }&#10;&#10;    public String getDescription() {&#10;        return description;&#10;    }&#10;&#10;    public void setDescription(String description) {&#10;        this.description = description;&#10;    }&#10;&#10;    public String getType() {&#10;        return type;&#10;    }&#10;&#10;    public void setType(String type) {&#10;        this.type = type;&#10;    }&#10;&#10;    public Date getDate() {&#10;        return date;&#10;    }&#10;&#10;    public void setDate(Date date) {&#10;        this.date = date;&#10;        if (date != null) {&#10;            this.timestamp = date.getTime();&#10;        }&#10;    }&#10;&#10;    public long getTimestamp() {&#10;        return timestamp;&#10;    }&#10;&#10;    public void setTimestamp(long timestamp) {&#10;        this.timestamp = timestamp;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/bg_calendar_selected.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/bg_calendar_selected.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;oval&quot;&gt;&#10;    &lt;solid android:color=&quot;@color/primary&quot; /&gt;&#10;&lt;/shape&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;oval&quot;&gt;&#10;    &lt;solid android:color=&quot;@color/primary&quot; /&gt;&#10;&lt;/shape&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/bg_calendar_today.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/bg_calendar_today.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;oval&quot;&gt;&#10;    &lt;stroke &#10;        android:width=&quot;2dp&quot;&#10;        android:color=&quot;@color/primary&quot; /&gt;&#10;    &lt;solid android:color=&quot;@android:color/transparent&quot; /&gt;&#10;&lt;/shape&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;oval&quot;&gt;&#10;    &lt;stroke &#10;        android:width=&quot;2dp&quot;&#10;        android:color=&quot;@color/primary&quot; /&gt;&#10;    &lt;solid android:color=&quot;@android:color/transparent&quot; /&gt;&#10;&lt;/shape&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/bg_edittext_focused.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/bg_edittext_focused.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;rectangle&quot;&gt;&#10;    &lt;solid android:color=&quot;@color/surface&quot; /&gt;&#10;    &lt;corners android:radius=&quot;14dp&quot; /&gt;&#10;    &lt;stroke&#10;        android:width=&quot;2dp&quot;&#10;        android:color=&quot;@color/primary&quot; /&gt;&#10;    &lt;padding&#10;        android:left=&quot;16dp&quot;&#10;        android:top=&quot;16dp&quot;&#10;        android:right=&quot;16dp&quot;&#10;        android:bottom=&quot;16dp&quot; /&gt;&#10;&lt;/shape&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;rectangle&quot;&gt;&#10;    &lt;solid android:color=&quot;@color/surface&quot; /&gt;&#10;    &lt;corners android:radius=&quot;14dp&quot; /&gt;&#10;    &lt;stroke&#10;        android:width=&quot;2dp&quot;&#10;        android:color=&quot;@color/primary&quot; /&gt;&#10;    &lt;padding&#10;        android:left=&quot;16dp&quot;&#10;        android:top=&quot;16dp&quot;&#10;        android:right=&quot;16dp&quot;&#10;        android:bottom=&quot;16dp&quot; /&gt;&#10;&lt;/shape&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/bg_edittext_selector.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/bg_edittext_selector.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;&#10;    &lt;item android:state_focused=&quot;true&quot; android:drawable=&quot;@drawable/bg_edittext_focused&quot; /&gt;&#10;    &lt;item android:drawable=&quot;@drawable/bg_edittext&quot; /&gt;&#10;&lt;/selector&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;&#10;    &lt;item android:state_focused=&quot;true&quot; android:drawable=&quot;@drawable/bg_edittext_focused&quot; /&gt;&#10;    &lt;item android:drawable=&quot;@drawable/bg_edittext&quot; /&gt;&#10;&lt;/selector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/bg_expense_badge.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/bg_expense_badge.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;rectangle&quot;&gt;&#10;    &lt;solid android:color=&quot;#FFE8E8&quot;/&gt;&#10;    &lt;corners android:radius=&quot;8dp&quot;/&gt;&#10;    &lt;stroke android:width=&quot;1dp&quot; android:color=&quot;@color/expense&quot;/&gt;&#10;&lt;/shape&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;rectangle&quot;&gt;&#10;    &lt;solid android:color=&quot;#FFE8E8&quot;/&gt;&#10;    &lt;corners android:radius=&quot;8dp&quot;/&gt;&#10;    &lt;stroke android:width=&quot;1dp&quot; android:color=&quot;@color/expense&quot;/&gt;&#10;&lt;/shape&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/bg_income_badge.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/bg_income_badge.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;rectangle&quot;&gt;&#10;    &lt;solid android:color=&quot;#E8F5E8&quot;/&gt;&#10;    &lt;corners android:radius=&quot;8dp&quot;/&gt;&#10;    &lt;stroke android:width=&quot;1dp&quot; android:color=&quot;@color/income&quot;/&gt;&#10;&lt;/shape&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;rectangle&quot;&gt;&#10;    &lt;solid android:color=&quot;#E8F5E8&quot;/&gt;&#10;    &lt;corners android:radius=&quot;8dp&quot;/&gt;&#10;    &lt;stroke android:width=&quot;1dp&quot; android:color=&quot;@color/income&quot;/&gt;&#10;&lt;/shape&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/bg_otp_input.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/bg_otp_input.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;&#10;    &lt;item android:state_focused=&quot;true&quot;&gt;&#10;        &lt;shape android:shape=&quot;rectangle&quot;&gt;&#10;            &lt;solid android:color=&quot;@color/surface&quot; /&gt;&#10;            &lt;corners android:radius=&quot;12dp&quot; /&gt;&#10;            &lt;stroke&#10;                android:width=&quot;2dp&quot;&#10;                android:color=&quot;@color/primary&quot; /&gt;&#10;        &lt;/shape&gt;&#10;    &lt;/item&gt;&#10;    &lt;item&gt;&#10;        &lt;shape android:shape=&quot;rectangle&quot;&gt;&#10;            &lt;solid android:color=&quot;@color/surface&quot; /&gt;&#10;            &lt;corners android:radius=&quot;12dp&quot; /&gt;&#10;            &lt;stroke&#10;                android:width=&quot;1dp&quot;&#10;                android:color=&quot;@color/border&quot; /&gt;&#10;        &lt;/shape&gt;&#10;    &lt;/item&gt;&#10;&lt;/selector&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;&#10;    &lt;item android:state_focused=&quot;true&quot;&gt;&#10;        &lt;shape android:shape=&quot;rectangle&quot;&gt;&#10;            &lt;solid android:color=&quot;@color/surface&quot; /&gt;&#10;            &lt;corners android:radius=&quot;12dp&quot; /&gt;&#10;            &lt;stroke&#10;                android:width=&quot;2dp&quot;&#10;                android:color=&quot;@color/primary&quot; /&gt;&#10;        &lt;/shape&gt;&#10;    &lt;/item&gt;&#10;    &lt;item&gt;&#10;        &lt;shape android:shape=&quot;rectangle&quot;&gt;&#10;            &lt;solid android:color=&quot;@color/surface&quot; /&gt;&#10;            &lt;corners android:radius=&quot;12dp&quot; /&gt;&#10;            &lt;stroke&#10;                android:width=&quot;1dp&quot;&#10;                android:color=&quot;@color/border&quot; /&gt;&#10;        &lt;/shape&gt;&#10;    &lt;/item&gt;&#10;&lt;/selector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_email.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_email.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    android:tint=&quot;@color/text_hint&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;@android:color/white&quot;&#10;      android:pathData=&quot;M20,4L4,4c-1.1,0 -1.99,0.9 -1.99,2L2,18c0,1.1 0.9,2 2,2h16c1.1,0 2,-0.9 2,-2L22,6c0,-1.1 -0.9,-2 -2,-2zM20,8l-8,5 -8,-5L4,6l8,5 8,-5v2z&quot;/&gt;&#10;&lt;/vector&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    android:tint=&quot;@color/text_hint&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;@android:color/white&quot;&#10;      android:pathData=&quot;M20,4L4,4c-1.1,0 -1.99,0.9 -1.99,2L2,18c0,1.1 0.9,2 2,2h16c1.1,0 2,-0.9 2,-2L22,6c0,-1.1 -0.9,-2 -2,-2zM20,8l-8,5 -8,-5L4,6l8,5 8,-5v2z&quot;/&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_entertainment.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_entertainment.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&gt;&#10;    &#10;    &lt;path&#10;        android:fillColor=&quot;#FF000000&quot;&#10;        android:pathData=&quot;M12,2l3.09,6.26L22,9.27l-5,4.87 1.18,6.88L12,17.77l-6.18,3.25L7,14.14 2,9.27l6.91,-1.01L12,2z&quot;/&gt;&#10;&lt;/vector&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&gt;&#10;    &#10;    &lt;path&#10;        android:fillColor=&quot;#FF000000&quot;&#10;        android:pathData=&quot;M12,2l3.09,6.26L22,9.27l-5,4.87 1.18,6.88L12,17.77l-6.18,3.25L7,14.14 2,9.27l6.91,-1.01L12,2z&quot;/&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_google.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_google.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#4285F4&quot;&#10;      android:pathData=&quot;M22.56,12.25c0,-0.78 -0.07,-1.53 -0.2,-2.25H12v4.26h5.92c-0.26,1.37 -1.04,2.53 -2.21,3.31v2.77h3.57c2.08,-1.92 3.28,-4.74 3.28,-8.09z&quot;/&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#34A853&quot;&#10;      android:pathData=&quot;M12,23c2.97,0 5.46,-0.98 7.28,-2.66l-3.57,-2.77c-0.98,0.66 -2.23,1.06 -3.71,1.06 -2.86,0 -5.29,-1.93 -6.16,-4.53H2.18v2.84C3.99,20.53 7.7,23 12,23z&quot;/&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#FBBC05&quot;&#10;      android:pathData=&quot;M5.84,14.09c-0.22,-0.66 -0.35,-1.36 -0.35,-2.09s0.13,-1.43 0.35,-2.09V7.07H2.18C1.43,8.55 1,10.22 1,12s0.43,3.45 1.18,4.93l2.85,-2.22 0.81,-0.62z&quot;/&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#EA4335&quot;&#10;      android:pathData=&quot;M12,5.38c1.62,0 3.06,0.56 4.21,1.64l3.15,-3.15C17.45,2.09 14.97,1 12,1 7.7,1 3.99,3.47 2.18,7.07l3.66,2.84c0.87,-2.6 3.3,-4.53 6.16,-4.53z&quot;/&gt;&#10;&lt;/vector&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#4285F4&quot;&#10;      android:pathData=&quot;M22.56,12.25c0,-0.78 -0.07,-1.53 -0.2,-2.25H12v4.26h5.92c-0.26,1.37 -1.04,2.53 -2.21,3.31v2.77h3.57c2.08,-1.92 3.28,-4.74 3.28,-8.09z&quot;/&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#34A853&quot;&#10;      android:pathData=&quot;M12,23c2.97,0 5.46,-0.98 7.28,-2.66l-3.57,-2.77c-0.98,0.66 -2.23,1.06 -3.71,1.06 -2.86,0 -5.29,-1.93 -6.16,-4.53H2.18v2.84C3.99,20.53 7.7,23 12,23z&quot;/&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#FBBC05&quot;&#10;      android:pathData=&quot;M5.84,14.09c-0.22,-0.66 -0.35,-1.36 -0.35,-2.09s0.13,-1.43 0.35,-2.09V7.07H2.18C1.43,8.55 1,10.22 1,12s0.43,3.45 1.18,4.93l2.85,-2.22 0.81,-0.62z&quot;/&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;#EA4335&quot;&#10;      android:pathData=&quot;M12,5.38c1.62,0 3.06,0.56 4.21,1.64l3.15,-3.15C17.45,2.09 14.97,1 12,1 7.7,1 3.99,3.47 2.18,7.07l3.66,2.84c0.87,-2.6 3.3,-4.53 6.16,-4.53z&quot;/&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_notification.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_notification.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&gt;&#10;    &lt;path&#10;        android:fillColor=&quot;@android:color/white&quot;&#10;        android:pathData=&quot;M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.9,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32V4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z&quot;/&gt;&#10;&lt;/vector&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&gt;&#10;    &lt;path&#10;        android:fillColor=&quot;@android:color/white&quot;&#10;        android:pathData=&quot;M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.9,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32V4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z&quot;/&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_visibility_off.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_visibility_off.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    android:tint=&quot;@color/text_hint&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;@android:color/white&quot;&#10;      android:pathData=&quot;M12,7c2.76,0 5,2.24 5,5 0,0.65 -0.13,1.26 -0.36,1.83l2.92,2.92c1.51,-1.26 2.7,-2.89 3.43,-4.75 -1.73,-4.39 -6,-7.5 -11,-7.5 -1.4,0 -2.74,0.25 -3.98,0.7l2.16,2.16C10.74,7.13 11.35,7 12,7zM2,4.27l2.28,2.28 0.46,0.46C3.08,8.3 1.78,10.02 1,12c1.73,4.39 6,7.5 11,7.5 1.55,0 3.03,-0.3 4.38,-0.84l0.42,0.42L19.73,22 21,20.73 3.27,3 2,4.27zM7.53,9.8l1.55,1.55c-0.05,0.21 -0.08,0.43 -0.08,0.65 0,1.66 1.34,3 3,3 0.22,0 0.44,-0.03 0.65,-0.08l1.55,1.55c-0.67,0.33 -1.41,0.53 -2.2,0.53 -2.76,0 -5,-2.24 -5,-5 0,-0.79 0.2,-1.53 0.53,-2.2zM11.84,9.02l3.15,3.15 0.02,-0.16c0,-1.66 -1.34,-3 -3,-3l-0.17,0.01z&quot;/&gt;&#10;&lt;/vector&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    android:tint=&quot;@color/text_hint&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;@android:color/white&quot;&#10;      android:pathData=&quot;M12,7c2.76,0 5,2.24 5,5 0,0.65 -0.13,1.26 -0.36,1.83l2.92,2.92c1.51,-1.26 2.7,-2.89 3.43,-4.75 -1.73,-4.39 -6,-7.5 -11,-7.5 -1.4,0 -2.74,0.25 -3.98,0.7l2.16,2.16C10.74,7.13 11.35,7 12,7zM2,4.27l2.28,2.28 0.46,0.46C3.08,8.3 1.78,10.02 1,12c1.73,4.39 6,7.5 11,7.5 1.55,0 3.03,-0.3 4.38,-0.84l0.42,0.42L19.73,22 21,20.73 3.27,3 2,4.27zM7.53,9.8l1.55,1.55c-0.05,0.21 -0.08,0.43 -0.08,0.65 0,1.66 1.34,3 3,3 0.22,0 0.44,-0.03 0.65,-0.08l1.55,1.55c-0.67,0.33 -1.41,0.53 -2.2,0.53 -2.76,0 -5,-2.24 -5,-5 0,-0.79 0.2,-1.53 0.53,-2.2zM11.84,9.02l3.15,3.15 0.02,-0.16c0,-1.66 -1.34,-3 -3,-3l-0.17,0.01z&quot;/&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/activity_add_income.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/activity_add_income.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout&#10;    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:background=&quot;#F5F7FA&quot;&#10;    android:fitsSystemWindows=&quot;true&quot;&gt;&#10;&#10;    &lt;!-- Header --&gt;&#10;    &lt;LinearLayout&#10;        android:id=&quot;@+id/layoutHeader&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;horizontal&quot;&#10;        android:gravity=&quot;center_vertical&quot;&#10;        android:paddingHorizontal=&quot;20dp&quot;&#10;        android:paddingVertical=&quot;10dp&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/btnBack&quot;&#10;            android:layout_width=&quot;50dp&quot;&#10;            android:layout_height=&quot;50dp&quot;&#10;            android:padding=&quot;8dp&quot;&#10;            android:src=&quot;@drawable/ic_arrow_back&quot;&#10;            android:contentDescription=&quot;@string/back&quot;&#10;            app:tint=&quot;@color/text_primary&quot;/&gt;&#10;&#10;        &lt;TextView&#10;            android:layout_width=&quot;0dp&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_weight=&quot;1&quot;&#10;            android:text=&quot;Thêm thu nhập&quot;&#10;            android:textColor=&quot;@color/text_primary&quot;&#10;            android:textSize=&quot;20sp&quot;&#10;            android:textStyle=&quot;bold&quot;&#10;            android:gravity=&quot;center&quot;/&gt;&#10;&#10;        &lt;View&#10;            android:layout_width=&quot;40dp&quot;&#10;            android:layout_height=&quot;40dp&quot;/&gt;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;!-- Scrollable Content --&gt;&#10;    &lt;ScrollView&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;0dp&quot;&#10;        android:fillViewport=&quot;true&quot;&#10;        app:layout_constraintBottom_toTopOf=&quot;@id/btnAddIncome&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/layoutHeader&quot;&gt;&#10;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:paddingHorizontal=&quot;20dp&quot;&#10;            android:paddingBottom=&quot;20dp&quot;&gt;&#10;&#10;            &lt;!-- Calendar Card --&gt;&#10;            &lt;androidx.cardview.widget.CardView&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;16dp&quot;&#10;                app:cardBackgroundColor=&quot;@android:color/white&quot;&#10;                app:cardCornerRadius=&quot;12dp&quot;&#10;                app:cardElevation=&quot;2dp&quot;&gt;&#10;&#10;                &lt;LinearLayout&#10;                    android:layout_width=&quot;match_parent&quot;&#10;                    android:layout_height=&quot;wrap_content&quot;&#10;                    android:orientation=&quot;vertical&quot;&#10;                    android:padding=&quot;16dp&quot;&gt;&#10;&#10;                    &lt;!-- Month Navigation --&gt;&#10;                    &lt;LinearLayout&#10;                        android:id=&quot;@+id/monthHeader&quot;&#10;                        android:layout_width=&quot;match_parent&quot;&#10;                        android:layout_height=&quot;wrap_content&quot;&#10;                        android:orientation=&quot;horizontal&quot;&#10;                        android:gravity=&quot;center_vertical&quot;&#10;                        android:clickable=&quot;true&quot;&#10;                        android:focusable=&quot;true&quot;&#10;                        android:background=&quot;?attr/selectableItemBackground&quot;&gt;&#10;&#10;                        &lt;ImageView&#10;                            android:id=&quot;@+id/btnPrevMonth&quot;&#10;                            android:layout_width=&quot;32dp&quot;&#10;                            android:layout_height=&quot;32dp&quot;&#10;                            android:padding=&quot;6dp&quot;&#10;                            android:src=&quot;@drawable/ic_arrow_back&quot;&#10;                            android:contentDescription=&quot;@string/previous_month&quot;&#10;                            android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;                            app:tint=&quot;#6B7280&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:id=&quot;@+id/tvMonthYear&quot;&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;February - 2023&quot;&#10;                            android:textColor=&quot;@color/text_primary&quot;&#10;                            android:textSize=&quot;16sp&quot;&#10;                            android:textStyle=&quot;bold&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;ImageView&#10;                            android:id=&quot;@+id/btnNextMonth&quot;&#10;                            android:layout_width=&quot;32dp&quot;&#10;                            android:layout_height=&quot;32dp&quot;&#10;                            android:padding=&quot;6dp&quot;&#10;                            android:src=&quot;@drawable/ic_arrow_back&quot;&#10;                            android:rotation=&quot;180&quot;&#10;                            android:contentDescription=&quot;@string/next_month&quot;&#10;                            android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;                            app:tint=&quot;#6B7280&quot;/&gt;&#10;                    &lt;/LinearLayout&gt;&#10;&#10;                    &lt;!-- Day of Week Labels --&gt;&#10;                    &lt;LinearLayout&#10;                        android:layout_width=&quot;match_parent&quot;&#10;                        android:layout_height=&quot;wrap_content&quot;&#10;                        android:orientation=&quot;horizontal&quot;&#10;                        android:layout_marginTop=&quot;12dp&quot;&#10;                        android:layout_marginBottom=&quot;8dp&quot;&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;S&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;M&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;T&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;W&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;T&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;F&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;S&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;                    &lt;/LinearLayout&gt;&#10;&#10;                    &lt;!-- Calendar Days RecyclerView --&gt;&#10;                    &lt;androidx.recyclerview.widget.RecyclerView&#10;                        android:id=&quot;@+id/rvCalendar&quot;&#10;                        android:layout_width=&quot;match_parent&quot;&#10;                        android:layout_height=&quot;wrap_content&quot;&#10;                        android:nestedScrollingEnabled=&quot;false&quot;&#10;                        tools:itemCount=&quot;7&quot;&#10;                        tools:layoutManager=&quot;androidx.recyclerview.widget.GridLayoutManager&quot;&#10;                        tools:spanCount=&quot;7&quot;/&gt;&#10;                &lt;/LinearLayout&gt;&#10;            &lt;/androidx.cardview.widget.CardView&gt;&#10;&#10;            &lt;!-- Income Title Section --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;20dp&quot;&#10;                android:text=&quot;Tiêu đề thu nhập&quot;&#10;                android:textColor=&quot;#6B7280&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:textSize=&quot;15sp&quot;/&gt;&#10;&#10;            &lt;EditText&#10;                android:id=&quot;@+id/etIncomeTitle&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;50dp&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:background=&quot;@drawable/bg_input_border&quot;&#10;                android:hint=&quot;VD: Lương tháng 2&quot;&#10;                android:paddingHorizontal=&quot;16dp&quot;&#10;                android:textSize=&quot;16sp&quot;&#10;                android:inputType=&quot;text&quot;&#10;                android:maxLines=&quot;1&quot;/&gt;&#10;&#10;            &lt;!-- Amount Section --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;16dp&quot;&#10;                android:text=&quot;Số tiền&quot;&#10;                android:textColor=&quot;#6B7280&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:textSize=&quot;15sp&quot;/&gt;&#10;&#10;            &lt;FrameLayout&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&gt;&#10;&#10;                &lt;EditText&#10;                    android:id=&quot;@+id/etAmount&quot;&#10;                    android:layout_width=&quot;match_parent&quot;&#10;                    android:layout_height=&quot;50dp&quot;&#10;                    android:background=&quot;@drawable/bg_input_border&quot;&#10;                    android:hint=&quot;0&quot;&#10;                    android:inputType=&quot;number&quot;&#10;                    android:paddingStart=&quot;16dp&quot;&#10;                    android:paddingEnd=&quot;50dp&quot;&#10;                    android:textSize=&quot;16sp&quot;&#10;                    android:textColor=&quot;@color/text_primary&quot;/&gt;&#10;            &lt;/FrameLayout&gt;&#10;&#10;            &lt;!-- Category Section --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;16dp&quot;&#10;                android:text=&quot;Danh mục thu nhập&quot;&#10;                android:textColor=&quot;#6B7280&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:textSize=&quot;15sp&quot;/&gt;&#10;&#10;            &lt;LinearLayout&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:orientation=&quot;horizontal&quot;&#10;                android:gravity=&quot;center_vertical&quot;&gt;&#10;&#10;                &lt;Spinner&#10;                    android:id=&quot;@+id/spinnerCategories&quot;&#10;                    android:layout_width=&quot;0dp&quot;&#10;                    android:layout_height=&quot;50dp&quot;&#10;                    android:layout_weight=&quot;1&quot;&#10;                    android:background=&quot;@drawable/bg_input_border&quot;&#10;                    android:paddingHorizontal=&quot;10dp&quot;&#10;                    android:layout_marginEnd=&quot;8dp&quot;/&gt;&#10;&#10;                &lt;com.google.android.material.button.MaterialButton&#10;                    android:id=&quot;@+id/btnAddCategory&quot;&#10;                    android:layout_width=&quot;50dp&quot;&#10;                    android:layout_height=&quot;50dp&quot;&#10;                    android:padding=&quot;0dp&quot;&#10;                    android:insetTop=&quot;0dp&quot;&#10;                    android:insetBottom=&quot;0dp&quot;&#10;                    android:insetLeft=&quot;0dp&quot;&#10;                    android:insetRight=&quot;0dp&quot;&#10;                    app:icon=&quot;@drawable/ic_add&quot;&#10;                    app:iconGravity=&quot;textStart&quot;&#10;                    app:iconPadding=&quot;0dp&quot;&#10;                    app:iconSize=&quot;24dp&quot;&#10;                    app:iconTint=&quot;@android:color/white&quot;&#10;                    app:cornerRadius=&quot;8dp&quot;&#10;                    app:backgroundTint=&quot;@color/primary&quot;&#10;                    android:backgroundTint=&quot;@color/primary&quot; /&gt;&#10;            &lt;/LinearLayout&gt;&#10;        &lt;/LinearLayout&gt;&#10;    &lt;/ScrollView&gt;&#10;&#10;    &lt;!-- Add Button --&gt;&#10;    &lt;com.google.android.material.button.MaterialButton&#10;        android:id=&quot;@+id/btnAddIncome&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;56dp&quot;&#10;        android:layout_margin=&quot;20dp&quot;&#10;        android:text=&quot;THÊM THU NHẬP&quot;&#10;        android:textSize=&quot;15sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        android:textColor=&quot;@android:color/white&quot;&#10;        app:cornerRadius=&quot;12dp&quot;&#10;        app:backgroundTint=&quot;@color/primary&quot;&#10;        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.constraintlayout.widget.ConstraintLayout&#10;    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:background=&quot;#F5F7FA&quot;&#10;    android:fitsSystemWindows=&quot;true&quot;&gt;&#10;&#10;    &lt;!-- Header --&gt;&#10;    &lt;LinearLayout&#10;        android:id=&quot;@+id/layoutHeader&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;horizontal&quot;&#10;        android:gravity=&quot;center_vertical&quot;&#10;        android:paddingHorizontal=&quot;20dp&quot;&#10;        android:paddingVertical=&quot;10dp&quot;&#10;        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/btnBack&quot;&#10;            android:layout_width=&quot;50dp&quot;&#10;            android:layout_height=&quot;50dp&quot;&#10;            android:padding=&quot;8dp&quot;&#10;            android:src=&quot;@drawable/ic_arrow_back&quot;&#10;            android:contentDescription=&quot;@string/back&quot;&#10;            app:tint=&quot;@color/text_primary&quot;/&gt;&#10;&#10;        &lt;TextView&#10;            android:layout_width=&quot;0dp&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_weight=&quot;1&quot;&#10;            android:text=&quot;Thêm thu nhập&quot;&#10;            android:textColor=&quot;@color/text_primary&quot;&#10;            android:textSize=&quot;20sp&quot;&#10;            android:textStyle=&quot;bold&quot;&#10;            android:gravity=&quot;center&quot;/&gt;&#10;&#10;        &lt;View&#10;            android:layout_width=&quot;40dp&quot;&#10;            android:layout_height=&quot;40dp&quot;/&gt;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;!-- Scrollable Content --&gt;&#10;    &lt;ScrollView&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;0dp&quot;&#10;        android:fillViewport=&quot;true&quot;&#10;        app:layout_constraintBottom_toTopOf=&quot;@id/btnAddIncome&quot;&#10;        app:layout_constraintTop_toBottomOf=&quot;@id/layoutHeader&quot;&gt;&#10;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;vertical&quot;&#10;            android:paddingHorizontal=&quot;20dp&quot;&#10;            android:paddingBottom=&quot;20dp&quot;&gt;&#10;&#10;            &lt;!-- Calendar Card --&gt;&#10;            &lt;androidx.cardview.widget.CardView&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;16dp&quot;&#10;                app:cardBackgroundColor=&quot;@android:color/white&quot;&#10;                app:cardCornerRadius=&quot;12dp&quot;&#10;                app:cardElevation=&quot;2dp&quot;&gt;&#10;&#10;                &lt;LinearLayout&#10;                    android:layout_width=&quot;match_parent&quot;&#10;                    android:layout_height=&quot;wrap_content&quot;&#10;                    android:orientation=&quot;vertical&quot;&#10;                    android:padding=&quot;16dp&quot;&gt;&#10;&#10;                    &lt;!-- Month Navigation --&gt;&#10;                    &lt;LinearLayout&#10;                        android:id=&quot;@+id/monthHeader&quot;&#10;                        android:layout_width=&quot;match_parent&quot;&#10;                        android:layout_height=&quot;wrap_content&quot;&#10;                        android:orientation=&quot;horizontal&quot;&#10;                        android:gravity=&quot;center_vertical&quot;&#10;                        android:clickable=&quot;true&quot;&#10;                        android:focusable=&quot;true&quot;&#10;                        android:background=&quot;?attr/selectableItemBackground&quot;&gt;&#10;&#10;                        &lt;ImageView&#10;                            android:id=&quot;@+id/btnPrevMonth&quot;&#10;                            android:layout_width=&quot;32dp&quot;&#10;                            android:layout_height=&quot;32dp&quot;&#10;                            android:padding=&quot;6dp&quot;&#10;                            android:src=&quot;@drawable/ic_arrow_back&quot;&#10;                            android:contentDescription=&quot;@string/previous_month&quot;&#10;                            android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;                            app:tint=&quot;#6B7280&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:id=&quot;@+id/tvMonthYear&quot;&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;February - 2023&quot;&#10;                            android:textColor=&quot;@color/text_primary&quot;&#10;                            android:textSize=&quot;16sp&quot;&#10;                            android:textStyle=&quot;bold&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;ImageView&#10;                            android:id=&quot;@+id/btnNextMonth&quot;&#10;                            android:layout_width=&quot;32dp&quot;&#10;                            android:layout_height=&quot;32dp&quot;&#10;                            android:padding=&quot;6dp&quot;&#10;                            android:src=&quot;@drawable/ic_arrow_back&quot;&#10;                            android:rotation=&quot;180&quot;&#10;                            android:contentDescription=&quot;@string/next_month&quot;&#10;                            android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;                            app:tint=&quot;#6B7280&quot;/&gt;&#10;                    &lt;/LinearLayout&gt;&#10;&#10;                    &lt;!-- Day of Week Labels --&gt;&#10;                    &lt;LinearLayout&#10;                        android:layout_width=&quot;match_parent&quot;&#10;                        android:layout_height=&quot;wrap_content&quot;&#10;                        android:orientation=&quot;horizontal&quot;&#10;                        android:layout_marginTop=&quot;12dp&quot;&#10;                        android:layout_marginBottom=&quot;8dp&quot;&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;S&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;M&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;T&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;W&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;T&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;F&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;&#10;                        &lt;TextView&#10;                            android:layout_width=&quot;0dp&quot;&#10;                            android:layout_height=&quot;wrap_content&quot;&#10;                            android:layout_weight=&quot;1&quot;&#10;                            android:text=&quot;S&quot;&#10;                            android:textSize=&quot;12sp&quot;&#10;                            android:textColor=&quot;#9CA3AF&quot;&#10;                            android:gravity=&quot;center&quot;/&gt;&#10;                    &lt;/LinearLayout&gt;&#10;&#10;                    &lt;!-- Calendar Days RecyclerView --&gt;&#10;                    &lt;androidx.recyclerview.widget.RecyclerView&#10;                        android:id=&quot;@+id/rvCalendar&quot;&#10;                        android:layout_width=&quot;match_parent&quot;&#10;                        android:layout_height=&quot;wrap_content&quot;&#10;                        android:nestedScrollingEnabled=&quot;false&quot;&#10;                        tools:itemCount=&quot;7&quot;&#10;                        tools:layoutManager=&quot;androidx.recyclerview.widget.GridLayoutManager&quot;&#10;                        tools:spanCount=&quot;7&quot;/&gt;&#10;                &lt;/LinearLayout&gt;&#10;            &lt;/androidx.cardview.widget.CardView&gt;&#10;&#10;            &lt;!-- Income Title Section --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;20dp&quot;&#10;                android:text=&quot;Tiêu đề thu nhập&quot;&#10;                android:textColor=&quot;#6B7280&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:textSize=&quot;15sp&quot;/&gt;&#10;&#10;            &lt;EditText&#10;                android:id=&quot;@+id/etIncomeTitle&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;50dp&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:background=&quot;@drawable/bg_input_border&quot;&#10;                android:hint=&quot;VD: Lương tháng 2&quot;&#10;                android:paddingHorizontal=&quot;16dp&quot;&#10;                android:textSize=&quot;16sp&quot;&#10;                android:inputType=&quot;text&quot;&#10;                android:maxLines=&quot;1&quot;/&gt;&#10;&#10;            &lt;!-- Amount Section --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;16dp&quot;&#10;                android:text=&quot;Số tiền&quot;&#10;                android:textColor=&quot;#6B7280&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:textSize=&quot;15sp&quot;/&gt;&#10;&#10;            &lt;FrameLayout&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&gt;&#10;&#10;                &lt;EditText&#10;                    android:id=&quot;@+id/etAmount&quot;&#10;                    android:layout_width=&quot;match_parent&quot;&#10;                    android:layout_height=&quot;50dp&quot;&#10;                    android:background=&quot;@drawable/bg_input_border&quot;&#10;                    android:hint=&quot;0&quot;&#10;                    android:inputType=&quot;number&quot;&#10;                    android:paddingStart=&quot;16dp&quot;&#10;                    android:paddingEnd=&quot;50dp&quot;&#10;                    android:textSize=&quot;16sp&quot;&#10;                    android:textColor=&quot;@color/text_primary&quot;/&gt;&#10;            &lt;/FrameLayout&gt;&#10;&#10;            &lt;!-- Category Section --&gt;&#10;            &lt;TextView&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;16dp&quot;&#10;                android:text=&quot;Danh mục thu nhập&quot;&#10;                android:textColor=&quot;#6B7280&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                android:textSize=&quot;15sp&quot;/&gt;&#10;&#10;            &lt;LinearLayout&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_marginTop=&quot;8dp&quot;&#10;                android:orientation=&quot;horizontal&quot;&#10;                android:gravity=&quot;center_vertical&quot;&gt;&#10;&#10;                &lt;Spinner&#10;                    android:id=&quot;@+id/spinnerCategories&quot;&#10;                    android:layout_width=&quot;0dp&quot;&#10;                    android:layout_height=&quot;50dp&quot;&#10;                    android:layout_weight=&quot;1&quot;&#10;                    android:background=&quot;@drawable/bg_input_border&quot;&#10;                    android:paddingHorizontal=&quot;10dp&quot;&#10;                    android:layout_marginEnd=&quot;8dp&quot;/&gt;&#10;&#10;                &lt;com.google.android.material.button.MaterialButton&#10;                    android:id=&quot;@+id/btnAddCategory&quot;&#10;                    android:layout_width=&quot;50dp&quot;&#10;                    android:layout_height=&quot;50dp&quot;&#10;                    android:padding=&quot;0dp&quot;&#10;                    android:insetTop=&quot;0dp&quot;&#10;                    android:insetBottom=&quot;0dp&quot;&#10;                    android:insetLeft=&quot;0dp&quot;&#10;                    android:insetRight=&quot;0dp&quot;&#10;                    app:icon=&quot;@drawable/ic_add&quot;&#10;                    app:iconGravity=&quot;textStart&quot;&#10;                    app:iconPadding=&quot;0dp&quot;&#10;                    app:iconSize=&quot;24dp&quot;&#10;                    app:iconTint=&quot;@android:color/white&quot;&#10;                    app:cornerRadius=&quot;8dp&quot;&#10;                    app:backgroundTint=&quot;@color/primary&quot;&#10;                    android:backgroundTint=&quot;@color/primary&quot; /&gt;&#10;            &lt;/LinearLayout&gt;&#10;        &lt;/LinearLayout&gt;&#10;    &lt;/ScrollView&gt;&#10;&#10;    &lt;!-- Add Button --&gt;&#10;    &lt;com.google.android.material.button.MaterialButton&#10;        android:id=&quot;@+id/btnAddIncome&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;56dp&quot;&#10;        android:layout_margin=&quot;20dp&quot;&#10;        android:text=&quot;THÊM THU NHẬP&quot;&#10;        android:textSize=&quot;15sp&quot;&#10;        android:textStyle=&quot;bold&quot;&#10;        android:textColor=&quot;@android:color/white&quot;&#10;        app:cornerRadius=&quot;12dp&quot;&#10;        app:backgroundTint=&quot;@color/primary&quot;&#10;        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;&#10;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/custom_bottom_navigation.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/custom_bottom_navigation.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:id=&quot;@+id/custom_bottom_navigation&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;wrap_content&quot;&#10;    android:background=&quot;@color/white&quot;&#10;    android:orientation=&quot;horizontal&quot;&#10;    android:paddingTop=&quot;6dp&quot;&#10;    android:paddingBottom=&quot;6dp&quot;&gt;&#10;&#10;    &lt;!-- Home Tab --&gt;&#10;    &lt;LinearLayout&#10;        android:id=&quot;@+id/nav_home&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_weight=&quot;1&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:gravity=&quot;center&quot;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;        android:padding=&quot;8dp&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/nav_home_icon&quot;&#10;            android:layout_width=&quot;30dp&quot;&#10;            android:layout_height=&quot;30dp&quot;&#10;            android:src=&quot;@drawable/ic_home&quot;&#10;            app:tint=&quot;@color/primary&quot; /&gt;&#10;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/nav_home_text&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Trang chủ&quot;&#10;            android:textColor=&quot;@color/primary&quot;&#10;            android:textSize=&quot;12sp&quot;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;!-- Transactions Tab --&gt;&#10;    &lt;LinearLayout&#10;        android:id=&quot;@+id/nav_transactions&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_weight=&quot;1&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:gravity=&quot;center&quot;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;        android:padding=&quot;8dp&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/nav_transactions_icon&quot;&#10;            android:layout_width=&quot;30dp&quot;&#10;            android:layout_height=&quot;30dp&quot;&#10;            android:src=&quot;@drawable/ic_calendar&quot;&#10;            app:tint=&quot;@color/text_secondary&quot; /&gt;&#10;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/nav_transactions_text&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Lịch&quot;&#10;            android:textColor=&quot;@color/text_secondary&quot;&#10;            android:textSize=&quot;12sp&quot;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;!-- Statistics Tab --&gt;&#10;    &lt;LinearLayout&#10;        android:id=&quot;@+id/nav_statistics&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_weight=&quot;1&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:gravity=&quot;center&quot;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;        android:padding=&quot;8dp&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/nav_statistics_icon&quot;&#10;            android:layout_width=&quot;30dp&quot;&#10;            android:layout_height=&quot;30dp&quot;&#10;            android:src=&quot;@drawable/ic_statistics&quot;&#10;            app:tint=&quot;@color/text_secondary&quot; /&gt;&#10;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/nav_statistics_text&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Thống kê&quot;&#10;            android:textColor=&quot;@color/text_secondary&quot;&#10;            android:textSize=&quot;12sp&quot;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;!-- Profile Tab --&gt;&#10;    &lt;LinearLayout&#10;        android:id=&quot;@+id/nav_profile&quot;&#10;        android:layout_width=&quot;0dp&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_weight=&quot;1&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:gravity=&quot;center&quot;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#10;        android:padding=&quot;8dp&quot;&gt;&#10;&#10;        &lt;ImageView&#10;            android:id=&quot;@+id/nav_profile_icon&quot;&#10;            android:layout_width=&quot;30dp&quot;&#10;            android:layout_height=&quot;30dp&quot;&#10;            android:src=&quot;@drawable/ic_profile&quot;&#10;            app:tint=&quot;@color/text_secondary&quot; /&gt;&#10;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/nav_profile_text&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Cá nhân&quot;&#10;            android:textColor=&quot;@color/text_secondary&quot;&#10;            android:textSize=&quot;12sp&quot;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;&lt;/LinearLayout&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#13;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#13;&#10;    android:id=&quot;@+id/custom_bottom_navigation&quot;&#13;&#10;    android:layout_width=&quot;match_parent&quot;&#13;&#10;    android:layout_height=&quot;wrap_content&quot;&#13;&#10;    android:background=&quot;@color/white&quot;&#13;&#10;    android:orientation=&quot;horizontal&quot;&#13;&#10;    android:paddingTop=&quot;6dp&quot;&#13;&#10;    android:paddingBottom=&quot;6dp&quot;&gt;&#13;&#10;&#13;&#10;    &lt;!-- Home Tab --&gt;&#13;&#10;    &lt;LinearLayout&#13;&#10;        android:id=&quot;@+id/nav_home&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_weight=&quot;1&quot;&#13;&#10;        android:orientation=&quot;vertical&quot;&#13;&#10;        android:gravity=&quot;center&quot;&#13;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#13;&#10;        android:padding=&quot;8dp&quot;&gt;&#13;&#10;&#13;&#10;        &lt;ImageView&#13;&#10;            android:id=&quot;@+id/nav_home_icon&quot;&#13;&#10;            android:layout_width=&quot;30dp&quot;&#13;&#10;            android:layout_height=&quot;30dp&quot;&#13;&#10;            android:src=&quot;@drawable/ic_home&quot;&#13;&#10;            app:tint=&quot;@color/primary&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;TextView&#13;&#10;            android:id=&quot;@+id/nav_home_text&quot;&#13;&#10;            android:layout_width=&quot;wrap_content&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:text=&quot;Trang chủ&quot;&#13;&#10;            android:textColor=&quot;@color/primary&quot;&#13;&#10;            android:textSize=&quot;12sp&quot;&#13;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#13;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;/LinearLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Transactions Tab --&gt;&#13;&#10;    &lt;LinearLayout&#13;&#10;        android:id=&quot;@+id/nav_transactions&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_weight=&quot;1&quot;&#13;&#10;        android:orientation=&quot;vertical&quot;&#13;&#10;        android:gravity=&quot;center&quot;&#13;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#13;&#10;        android:padding=&quot;8dp&quot;&gt;&#13;&#10;&#13;&#10;        &lt;ImageView&#13;&#10;            android:id=&quot;@+id/nav_transactions_icon&quot;&#13;&#10;            android:layout_width=&quot;30dp&quot;&#13;&#10;            android:layout_height=&quot;30dp&quot;&#13;&#10;            android:src=&quot;@drawable/ic_calendar&quot;&#13;&#10;            app:tint=&quot;@color/text_secondary&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;TextView&#13;&#10;            android:id=&quot;@+id/nav_transactions_text&quot;&#13;&#10;            android:layout_width=&quot;wrap_content&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:text=&quot;Lịch&quot;&#13;&#10;            android:textColor=&quot;@color/text_secondary&quot;&#13;&#10;            android:textSize=&quot;12sp&quot;&#13;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#13;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;/LinearLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Statistics Tab --&gt;&#13;&#10;    &lt;LinearLayout&#13;&#10;        android:id=&quot;@+id/nav_statistics&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_weight=&quot;1&quot;&#13;&#10;        android:orientation=&quot;vertical&quot;&#13;&#10;        android:gravity=&quot;center&quot;&#13;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#13;&#10;        android:padding=&quot;8dp&quot;&gt;&#13;&#10;&#13;&#10;        &lt;ImageView&#13;&#10;            android:id=&quot;@+id/nav_statistics_icon&quot;&#13;&#10;            android:layout_width=&quot;30dp&quot;&#13;&#10;            android:layout_height=&quot;30dp&quot;&#13;&#10;            android:src=&quot;@drawable/ic_statistics&quot;&#13;&#10;            app:tint=&quot;@color/text_secondary&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;TextView&#13;&#10;            android:id=&quot;@+id/nav_statistics_text&quot;&#13;&#10;            android:layout_width=&quot;wrap_content&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:text=&quot;Thống kê&quot;&#13;&#10;            android:textColor=&quot;@color/text_secondary&quot;&#13;&#10;            android:textSize=&quot;12sp&quot;&#13;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#13;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;/LinearLayout&gt;&#13;&#10;&#13;&#10;    &lt;!-- Profile Tab --&gt;&#13;&#10;    &lt;LinearLayout&#13;&#10;        android:id=&quot;@+id/nav_profile&quot;&#13;&#10;        android:layout_width=&quot;0dp&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:layout_weight=&quot;1&quot;&#13;&#10;        android:orientation=&quot;vertical&quot;&#13;&#10;        android:gravity=&quot;center&quot;&#13;&#10;        android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;&#13;&#10;        android:padding=&quot;8dp&quot;&gt;&#13;&#10;&#13;&#10;        &lt;ImageView&#13;&#10;            android:id=&quot;@+id/nav_profile_icon&quot;&#13;&#10;            android:layout_width=&quot;30dp&quot;&#13;&#10;            android:layout_height=&quot;30dp&quot;&#13;&#10;            android:src=&quot;@drawable/ic_profile&quot;&#13;&#10;            app:tint=&quot;@color/text_secondary&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;TextView&#13;&#10;            android:id=&quot;@+id/nav_profile_text&quot;&#13;&#10;            android:layout_width=&quot;wrap_content&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:text=&quot;Cá nhân&quot;&#13;&#10;            android:textColor=&quot;@color/text_secondary&quot;&#13;&#10;            android:textSize=&quot;12sp&quot;&#13;&#10;            android:fontFamily=&quot;@font/inter_medium&quot;&#13;&#10;            android:layout_marginTop=&quot;0dp&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;/LinearLayout&gt;&#13;&#10;&#13;&#10;&lt;/LinearLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>